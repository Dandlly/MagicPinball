
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/FSDK_ASS/FSript/FNetWork/FLogic.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '375ffTLnMtIN5TopH4/6Wq7', 'FLogic');
// FSDK_ASS/FSript/FNetWork/FLogic.ts

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var FGlobal_1 = require("../FModel/FGlobal");
var FLogic = /** @class */ (function () {
    function FLogic() {
        this.cbList = {};
        this.RESTAR_TIME = null;
        //在线计时器
        this.ONLINE_TIME = null;
    }
    FLogic.getInstance = function () {
        if (!FLogic._instance) {
            FLogic._instance = new FLogic();
        }
        return FLogic._instance;
    };
    //注册监听
    FLogic.prototype.addCommonListenser = function () {
        cc.director.on(FEventID.S2C_reg_login, this.on_S2C_reg_login, this);
        cc.director.on(FEventID.S2C_heartbeat, this.on_S2C_heartbeat, this);
        cc.director.on(FEventID.S2C_info, this.on_S2C_info, this);
        cc.director.on(FEventID.S2C_update_credit, this.on_S2C_update_credit, this);
        cc.director.on(FEventID.S2C_update_coin, this.on_S2C_update_coin, this);
        cc.director.on(FEventID.S2C_invited, this.on_S2C_invited, this);
        cc.director.on(FEventID.S2C_trans_history, this.on_S2C_trans_history, this);
        cc.director.on(FEventID.S2C_pg_user_cnt, this.on_S2C_pg_user_cnt, this);
        cc.director.on(FEventID.S2C_trans, this.on_S2C_trans, this);
    };
    //移除监听
    FLogic.prototype.removeCommonListenser = function () {
        cc.director.off(FEventID.S2C_reg_login, this.on_S2C_reg_login, this);
        cc.director.off(FEventID.S2C_update_credit, this.on_S2C_update_credit, this);
        cc.director.off(FEventID.S2C_info, this.on_S2C_info, this);
        cc.director.off(FEventID.S2C_heartbeat, this.on_S2C_heartbeat, this);
        cc.director.off(FEventID.S2C_update_coin, this.on_S2C_update_coin, this);
        cc.director.off(FEventID.S2C_invited, this.on_S2C_invited, this);
        cc.director.off(FEventID.S2C_trans_history, this.on_S2C_trans_history, this);
        cc.director.off(FEventID.S2C_pg_user_cnt, this.on_S2C_pg_user_cnt, this);
        cc.director.off(FEventID.S2C_trans, this.on_S2C_trans, this);
    };
    //心跳返回
    FLogic.prototype.on_S2C_heartbeat = function (msg) {
        if (FGlobal_1.FGlobal.getDateDay(FGlobal_1.FGlobal.USER_INFO.now) < FGlobal_1.FGlobal.getDateDay(msg.data.time)) {
            FGlobal_1.FGlobal.resetData();
            if (FLogic.getInstance().cbList[FEventID.NEXT_DAY]) {
                var cb = FLogic.getInstance().cbList[FEventID.NEXT_DAY].cb;
                var target = FLogic.getInstance().cbList[FEventID.NEXT_DAY].target;
                cb.call(target);
            }
        }
        FGlobal_1.FGlobal.USER_INFO.now = msg.data.time;
        FGlobal_1.FGlobal.NetWork.heartbeat();
    };
    //登录返回信息
    FLogic.prototype.on_S2C_reg_login = function (msg) {
        FSDK.hideToLoad();
        FLog.normal("服务器返回登录信息   ", msg);
        var cb = FLogic.getInstance().cbList[FEventID.S2C_reg_login].cb;
        var target = FLogic.getInstance().cbList[FEventID.S2C_reg_login].target;
        if (msg.err) {
            if (msg.err == 'RELOGIN MUST DELAY') {
                FGlobal_1.FGlobal.NetWork.clearAllTime();
                FGlobal_1.FGlobal.NetWork.off(FEventID.EVENT_CLOSE);
                FGlobal_1.FGlobal.NetWork.off(FEventID.EVENT_IO_ERROR);
                FGlobal_1.FGlobal.NetWork = null;
                FSDK.object.RESTAR_TIME = setTimeout(function () {
                    FSDK.init(FNetWorkConfig.data, FGlobal_1.FGlobal.NetWork.cb, FGlobal_1.FGlobal.NetWork.target);
                    clearTimeout(FSDK.object.RESTAR_TIME);
                    FSDK.hideToLoad();
                }, (msg.data.must_delay + 1) * 1000);
                FSDK.showToLoad("Rebinding", msg.data.must_delay + 1);
            }
            return;
        }
        if (msg.data) {
            FGlobal_1.FGlobal.USER_INFO.preferences = msg.data.preferences;
            FGlobal_1.FGlobal.setPreferences();
            FGlobal_1.FGlobal.USER_INFO.invite_code = msg.data.invite_code;
            cc.log('Kankan      ', msg.data);
            FGlobal_1.FGlobal.USER_INFO.invite_count = msg.data.invite_count;
            FGlobal_1.FGlobal.USER_INFO.be_invite = msg.data.personal.invited;
            FGlobal_1.FGlobal.USER_INFO.login_cnt = msg.data.login_cnt;
            FGlobal_1.FGlobal.USER_INFO.login_days = msg.data.login_days;
            FGlobal_1.FGlobal.USER_INFO.credit = msg.data.basic.credit;
            FGlobal_1.FGlobal.USER_INFO.reg_time = msg.data.reg_time;
            FGlobal_1.FGlobal.USER_INFO.off_time = msg.data.offline_timelen;
            FGlobal_1.FGlobal.USER_INFO.login_time = msg.data.now;
            FGlobal_1.FGlobal.USER_INFO.trans_record = msg.data.basic.redeem_task;
            FGlobal_1.FGlobal.USER_INFO.online_total = msg.data.online_total;
            FGlobal_1.FGlobal.USER_INFO.isFlag = msg.data.basic.user_vip;
            FGlobal_1.FGlobal.USER_INFO.isBlack = msg.data.b;
            FGlobal_1.FGlobal.USER_INFO.now = msg.data.now;
            FGlobal_1.FGlobal.USER_INFO.credit_pp = msg.data.basic.coins["pp"] ? msg.data.basic.coins["pp"] : 0;
            FGlobal_1.FGlobal.USER_INFO.credit_gp = msg.data.basic.coins["gp"] ? msg.data.basic.coins["gp"] : 0;
            if (msg.data.conf_hash) {
                FConfig.conf_hash = msg.data.conf_hash;
                localStorage.setItem('conf_hash', FConfig.conf_hash);
            }
            if (msg.data.game_settings_info && msg.data.game_settings_info.zip) {
                FConfig.game_settings_info = msg.data.game_settings_info;
                localStorage.setItem('game_settings_info', JSON.stringify(FConfig.game_settings_info));
            }
            if (msg.data.conf) {
                FConfig.conf = msg.data.conf;
                localStorage.setItem('conf', JSON.stringify(FConfig.conf));
                FLog.normal("看看配置2   ", msg.data.conf);
            }
            FGlobal_1.FGlobal.setConf();
            //是否第二天重置
            if (FGlobal_1.FGlobal.getDateDay(FGlobal_1.FGlobal.USER_INFO.login_time - FGlobal_1.FGlobal.USER_INFO.off_time) < FGlobal_1.FGlobal.getDateDay(FGlobal_1.FGlobal.USER_INFO.login_time)) {
                FGlobal_1.FGlobal.resetData();
                FGlobal_1.FGlobal.USER_INFO.isNextDay = true;
            }
            else {
                FGlobal_1.FGlobal.USER_INFO.isNextDay = false;
            }
            if (!this.ONLINE_TIME && !FGlobal_1.FGlobal.USER_INFO.preferences['real']) {
                this.ONLINE_TIME = setInterval(function () {
                    FGlobal_1.FGlobal.USER_INFO.online_total++;
                    if (FGlobal_1.FGlobal.USER_INFO.online_total >= FConfig.FSDK_CONF.REAL_USER.online_time) {
                        FSDK.setActiveUser();
                    }
                }, 1000);
            }
        }
        cb.call(target, FGlobal_1.FGlobal.USER_INFO);
        FNative.preloadVideo(FConfig.FSDK_CONF.AD_CONF.video);
        FNative.preloadInters(FConfig.FSDK_CONF.AD_CONF.inters);
        FSDK.umengEvent("server_suc", "0");
        //插屏时间验证
        var lineTime = FGlobal_1.FGlobal.USER_INFO.now - FGlobal_1.FGlobal.USER_INFO.reg_time;
        if (FConfig.FSDK_CONF.AD_CONF.inters_fresh_time.star - lineTime > 0) {
            FNative.inters_fresh_time = FConfig.FSDK_CONF.AD_CONF.inters_fresh_time.star - lineTime + FConfig.FSDK_CONF.AD_CONF.inters_fresh_time[FSDK.getUserType()];
        }
        else {
            FNative.inters_fresh_time = FConfig.FSDK_CONF.AD_CONF.inters_fresh_time[FSDK.getUserType()];
        }
        FNative.freshInters();
    };
    //credit更新信息
    FLogic.prototype.on_S2C_update_credit = function (msg) {
        if (msg.err) {
            FSDK.showToast(msg.err);
            return;
        }
        var change = 0;
        if (msg.data) {
            change = msg.data.credit - FGlobal_1.FGlobal.USER_INFO.credit;
            FGlobal_1.FGlobal.USER_INFO.credit = msg.data.credit;
            if (FGlobal_1.FGlobal.USER_INFO.credit >= 100000) {
                FSDK.umengEvent(FConfig.UMENG_CONFIG.Redeem_coin_100000, "1", true);
            }
            if (FGlobal_1.FGlobal.USER_INFO.credit >= 225000) {
                FSDK.umengEvent(FConfig.UMENG_CONFIG.Redeem_coin_225000, "1", true);
            }
            if (FGlobal_1.FGlobal.USER_INFO.credit >= 400000) {
                FSDK.umengEvent(FConfig.UMENG_CONFIG.Redeem_coin_400000, "1", true);
            }
        }
        var data = {
            type: "credit",
            num: FGlobal_1.FGlobal.USER_INFO.credit,
            change: change
        };
        cc.director.emit(FEventID.FRESH_CREDIT, data);
    };
    //其它credit更新信息
    FLogic.prototype.on_S2C_update_coin = function (msg) {
        if (msg.err) {
            FSDK.showToast(msg.err);
            return;
        }
        var change = 0;
        if (msg.data) {
            switch (msg.data.name) {
                case 'pp':
                    change = msg.data.coin - FGlobal_1.FGlobal.USER_INFO.credit_pp;
                    FGlobal_1.FGlobal.USER_INFO.credit_pp = msg.data.coin;
                    if (FGlobal_1.FGlobal.USER_INFO.credit_pp >= 100) {
                        FSDK.umengEvent(FConfig.UMENG_CONFIG.Redeem_pp_100, "1", true);
                    }
                    FGlobal_1.FGlobal.USER_INFO.cardGet.pp++;
                    if (FGlobal_1.FGlobal.USER_INFO.cardGet.pp >= 497) {
                        FSDK.umengEvent(FConfig.UMENG_CONFIG.Redeem_pp_max, "1", true);
                    }
                    break;
                case 'gp':
                    change = msg.data.coin - FGlobal_1.FGlobal.USER_INFO.credit_gp;
                    FGlobal_1.FGlobal.USER_INFO.credit_gp = msg.data.coin;
                    if (FGlobal_1.FGlobal.USER_INFO.credit_gp >= 100) {
                        FSDK.umengEvent(FConfig.UMENG_CONFIG.Redeem_gp_100, "1", true);
                    }
                    FGlobal_1.FGlobal.USER_INFO.cardGet.gp++;
                    if (FGlobal_1.FGlobal.USER_INFO.cardGet.gp >= 497) {
                        FSDK.umengEvent(FConfig.UMENG_CONFIG.Redeem_gp_max, "1", true);
                    }
                    break;
            }
        }
        var data = {
            type: msg.data.name,
            num: FGlobal_1.FGlobal.USER_INFO["credit_" + msg.data.name],
            change: change
        };
        FSDK.saveData("CARD_GET", FGlobal_1.FGlobal.USER_INFO.cardGet);
        cc.director.emit(FEventID.FRESH_CREDIT, data);
    };
    //返回信息同步数据
    FLogic.prototype.on_S2C_info = function (msg) {
        if (msg.err) {
            return;
        }
        if (msg.data) {
            if (msg.data.basic) {
                if (msg.data.basic.user_vip) {
                    FGlobal_1.FGlobal.USER_INFO.isFlag = msg.data.basic.user_vip;
                    cc.director.emit(FEventID.FRESH_FLAG, FGlobal_1.FGlobal.USER_INFO.isFlag);
                }
                if (msg.data.basic.credit) {
                    FGlobal_1.FGlobal.USER_INFO.credit = msg.data.basic.credit;
                }
            }
            if (msg.data.invite) {
                FGlobal_1.FGlobal.USER_INFO.invite_count = msg.data.invite.count;
                if (msg.data.invite.task) {
                    FGlobal_1.FGlobal.invite_task = msg.data.invite.task;
                }
            }
            if (msg.data.coins) {
                cc.director.emit(FEventID.CARD_RECORD, msg.data.coins);
            }
            cc.director.emit(FEventID.FRESH_USERINFO, msg.data);
        }
    };
    FLogic.prototype.on_S2C_invited = function (msg) {
        if (msg.err) {
            FSDK.showToast(msg.err);
            return;
        }
    };
    FLogic.prototype.on_S2C_trans_history = function (msg) {
        var data = {
            redeem_task: FConfig.conf.redeem_task,
            history: null
        };
        if (msg.err) {
            data.history = null;
        }
        else {
            data.history = msg.data.records;
        }
        if (FLogic.getInstance().cbList[FEventID.S2C_trans_history]) {
            FLogic.getInstance().cbList[FEventID.S2C_trans_history].cb.call(FLogic.getInstance().cbList[FEventID.S2C_trans_history].target, data);
            FLogic.getInstance().cbList[FEventID.S2C_trans_history] = null;
        }
    };
    FLogic.prototype.on_S2C_pg_user_cnt = function (msg) {
        var data = null;
        if (msg.err) {
        }
        else {
            data = msg.data.info;
        }
        if (FLogic.getInstance().cbList[FEventID.S2C_pg_user_cnt]) {
            FLogic.getInstance().cbList[FEventID.S2C_pg_user_cnt].cb(data);
            FLogic.getInstance().cbList[FEventID.S2C_pg_user_cnt] = null;
        }
    };
    FLogic.prototype.on_S2C_trans = function (msg) {
        if (msg.err) {
            FSDK.showToast(msg.err);
        }
        else {
            if (FLogic.getInstance().cbList[FEventID.S2C_trans]) {
                FLogic.getInstance().cbList[FEventID.S2C_trans].cb();
                FLogic.getInstance().cbList[FEventID.S2C_trans] = null;
            }
        }
    };
    return FLogic;
}());
exports.FLogic = FLogic;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcRlNES19BU1NcXEZTcmlwdFxcRk5ldFdvcmtcXEZMb2dpYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDZDQUE0QztBQUU1QztJQUFBO1FBQ1csV0FBTSxHQUFHLEVBQUUsQ0FBQztRQUVaLGdCQUFXLEdBQUcsSUFBSSxDQUFDO1FBQzFCLE9BQU87UUFDQSxnQkFBVyxHQUFHLElBQUksQ0FBQztJQWlTOUIsQ0FBQztJQWhTaUIsa0JBQVcsR0FBekI7UUFDSSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRTtZQUNuQixNQUFNLENBQUMsU0FBUyxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7U0FDbkM7UUFDRCxPQUFPLE1BQU0sQ0FBQyxTQUFTLENBQUM7SUFDNUIsQ0FBQztJQUVELE1BQU07SUFDQyxtQ0FBa0IsR0FBekI7UUFDSSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNwRSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNwRSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDMUQsRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM1RSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN4RSxFQUFFLENBQUMsUUFBUSxDQUFD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QTFCLFVBQTJCLEdBQUc7UUFDMUIsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRTtTQUVaO2FBQ0k7WUFDRCxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7U0FDeEI7UUFDRCxJQUFJLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQ3ZELE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMvRCxNQUFNLENBQUMsV0FBVyxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsR0FBRyxJQUFJLENBQUM7U0FDaEU7SUFDTCxDQUFDO0lBRU8sNkJBQVksR0FBcEIsVUFBcUIsR0FBRztRQUNwQixJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUU7WUFDVCxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUMzQjthQUNJO1lBQ0QsSUFBSSxNQUFNLENBQUMsV0FBVyxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBRTtnQkFDakQsTUFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQ3JELE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQzthQUMxRDtTQUNKO0lBQ0wsQ0FBQztJQUNMLGFBQUM7QUFBRCxDQXRTQSxBQXNTQyxJQUFBO0FBdFNZLHdCQUFNIiwiZmlsZSI6IiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRkdsb2JhbCB9IGZyb20gXCIuLi9GTW9kZWwvRkdsb2JhbFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZMb2dpYyB7XHJcbiAgICBwdWJsaWMgY2JMaXN0ID0ge307XHJcbiAgICBwdWJsaWMgc3RhdGljIF9pbnN0YW5jZTogRkxvZ2ljO1xyXG4gICAgcHVibGljIFJFU1RBUl9USU1FID0gbnVsbDtcclxuICAgIC8v5Zyo57q/6K6h5pe25ZmoXHJcbiAgICBwdWJsaWMgT05MSU5FX1RJTUUgPSBudWxsO1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcclxuICAgICAgICBpZiAoIUZMb2dpYy5faW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgRkxvZ2ljLl9pbnN0YW5jZSA9IG5ldyBGTG9naWMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEZMb2dpYy5faW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy/ms6jlhoznm5HlkKxcclxuICAgIHB1YmxpYyBhZGRDb21tb25MaXN0ZW5zZXIoKSB7XHJcbiAgICAgICAgY2MuZGlyZWN0b3Iub24oRkV2ZW50SUQuUzJDX3JlZ19sb2dpbiwgdGhpcy5vbl9TMkNfcmVnX2xvZ2luLCB0aGlzKTtcclxuICAgICAgICBjYy5kaXJlY3Rvci5vbihGRXZlbnRJRC5TMkNfaGVhcnRiZWF0LCB0aGlzLm9uX1MyQ19oZWFydGJlYXQsIHRoaXMpO1xyXG4gICAgICAgIGNjLmRpcmVjdG9yLm9uKEZFdmVudElELlMyQ19pbmZvLCB0aGlzLm9uX1MyQ19pbmZvLCB0aGlzKTtcclxuICAgICAgICBjYy5kaXJlY3Rvci5vbihGRXZlbnRJRC5TMkNfdXBkYXRlX2NyZWRpdCwgdGhpcy5vbl9TMkNfdXBkYXRlX2NyZWRpdCwgdGhpcyk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3Iub24oRkV2ZW50SUQuUzJDX3VwZGF0ZV9jb2luLCB0aGlzLm9uX1MyQ191cGRhdGVfY29pbiwgdGhpcyk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3Iub24oRkV2ZW50SUQuUzJDX2ludml0ZWQsIHRoaXMub25fUzJDX2ludml0ZWQsIHRoaXMpO1xyXG4gICAgICAgIGNjLmRpcmVjdG9yLm9uKEZFdmVudElELlMyQ190cmFuc19oaXN0b3J5LCB0aGlzLm9uX1MyQ190cmFuc19oaXN0b3J5LCB0aGlzKTtcclxuICAgICAgICBjYy5kaXJlY3Rvci5vbihGRXZlbnRJRC5TMkNfcGdfdXNlcl9jbnQsIHRoaXMub25fUzJDX3BnX3VzZXJfY250LCB0aGlzKTtcclxuICAgICAgICBjYy5kaXJlY3Rvci5vbihGRXZlbnRJRC5TMkNfdHJhbnMsIHRoaXMub25fUzJDX3RyYW5zLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvL+enu+mZpOebkeWQrFxyXG4gICAgcHVibGljIHJlbW92ZUNvbW1vbkxpc3RlbnNlcigpIHtcclxuICAgICAgICBjYy5kaXJlY3Rvci5vZmYoRkV2ZW50SUQuUzJDX3JlZ19sb2dpbiwgdGhpcy5vbl9TMkNfcmVnX2xvZ2luLCB0aGlzKTtcclxuICAgICAgICBjYy5kaXJlY3Rvci5vZmYoRkV2ZW50SUQuUzJDX3VwZGF0ZV9jcmVkaXQsIHRoaXMub25fUzJDX3VwZGF0ZV9jcmVkaXQsIHRoaXMpO1xyXG4gICAgICAgIGNjLmRpcmVjdG9yLm9mZihGRXZlbnRJRC5TMkNfaW5mbywgdGhpcy5vbl9TMkNfaW5mbywgdGhpcyk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3Iub2ZmKEZFdmVudElELlMyQ19oZWFydGJlYXQsIHRoaXMub25fUzJDX2hlYXJ0YmVhdCwgdGhpcyk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3Iub2ZmKEZFdmVudElELlMyQ191cGRhdGVfY29pbiwgdGhpcy5vbl9TMkNfdXBkYXRlX2NvaW4sIHRoaXMpO1xyXG4gICAgICAgIGNjLmRpcmVjdG9yLm9mZihGRXZlbnRJRC5TMkNfaW52aXRlZCwgdGhpcy5vbl9TMkNfaW52aXRlZCwgdGhpcyk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3Iub2ZmKEZFdmVudElELlMyQ190cmFuc19oaXN0b3J5LCB0aGlzLm9uX1MyQ190cmFuc19oaXN0b3J5LCB0aGlzKTtcclxuICAgICAgICBjYy5kaXJlY3Rvci5vZmYoRkV2ZW50SUQuUzJDX3BnX3VzZXJfY250LCB0aGlzLm9uX1MyQ19wZ191c2VyX2NudCwgdGhpcyk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3Iub2ZmKEZFdmVudElELlMyQ190cmFucywgdGhpcy5vbl9TMkNfdHJhbnMsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v5b+D6Lez6L+U5ZueXHJcbiAgICBwcml2YXRlIG9uX1MyQ19oZWFydGJlYXQobXNnKSB7XHJcbiAgICAgICAgaWYgKEZHbG9iYWwuZ2V0RGF0ZURheShGR2xvYmFsLlVTRVJfSU5GTy5ub3cpIDwgRkdsb2JhbC5nZXREYXRlRGF5KG1zZy5kYXRhLnRpbWUpKSB7XHJcbiAgICAgICAgICAgIEZHbG9iYWwucmVzZXREYXRhKCk7XHJcbiAgICAgICAgICAgIGlmIChGTG9naWMuZ2V0SW5zdGFuY2UoKS5jYkxpc3RbRkV2ZW50SUQuTkVYVF9EQVldKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2IgPSBGTG9naWMuZ2V0SW5zdGFuY2UoKS5jYkxpc3RbRkV2ZW50SUQuTkVYVF9EQVldLmNiO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IEZMb2dpYy5nZXRJbnN0YW5jZSgpLmNiTGlzdFtGRXZlbnRJRC5ORVhUX0RBWV0udGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgY2IuY2FsbCh0YXJnZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEZHbG9iYWwuVVNFUl9JTkZPLm5vdyA9IG1zZy5kYXRhLnRpbWU7XHJcbiAgICAgICAgRkdsb2JhbC5OZXRXb3JrLmhlYXJ0YmVhdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v55m75b2V6L+U5Zue5L+h5oGvXHJcbiAgICBwcml2YXRlIG9uX1MyQ19yZWdfbG9naW4obXNnKSB7XHJcbiAgICAgICAgRlNESy5oaWRlVG9Mb2FkKCk7XHJcbiAgICAgICAgRkxvZy5ub3JtYWwoXCLmnI3liqHlmajov5Tlm57nmbvlvZXkv6Hmga8gICBcIiwgbXNnKTtcclxuICAgICAgICBsZXQgY2IgPSBGTG9naWMuZ2V0SW5zdGFuY2UoKS5jYkxpc3RbRkV2ZW50SUQuUzJDX3JlZ19sb2dpbl0uY2I7XHJcbiAgICAgICAgbGV0IHRhcmdldCA9IEZMb2dpYy5nZXRJbnN0YW5jZSgpLmNiTGlzdFtGRXZlbnRJRC5TMkNfcmVnX2xvZ2luXS50YXJnZXQ7XHJcbiAgICAgICAgaWYgKG1zZy5lcnIpIHtcclxuICAgICAgICAgICAgaWYgKG1zZy5lcnIgPT0gJ1JFTE9HSU4gTVVTVCBERUxBWScpIHtcclxuICAgICAgICAgICAgICAgIEZHbG9iYWwuTmV0V29yay5jbGVhckFsbFRpbWUoKTtcclxuICAgICAgICAgICAgICAgIEZHbG9iYWwuTmV0V29yay5vZmYoRkV2ZW50SUQuRVZFTlRfQ0xPU0UpO1xyXG4gICAgICAgICAgICAgICAgRkdsb2JhbC5OZXRXb3JrLm9mZihGRXZlbnRJRC5FVkVOVF9JT19FUlJPUik7XHJcbiAgICAgICAgICAgICAgICBGR2xvYmFsLk5ldFdvcmsgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgRlNESy5vYmplY3QuUkVTVEFSX1RJTUUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBGU0RLLmluaXQoRk5ldFdvcmtDb25maWcuZGF0YSwgRkdsb2JhbC5OZXRXb3JrLmNiLCBGR2xvYmFsLk5ldFdvcmsudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoRlNESy5vYmplY3QuUkVTVEFSX1RJTUUpO1xyXG4gICAgICAgICAgICAgICAgICAgIEZTREsuaGlkZVRvTG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSwgKG1zZy5kYXRhLm11c3RfZGVsYXkgKyAxKSAqIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgRlNESy5zaG93VG9Mb2FkKFwiUmViaW5kaW5nXCIsIG1zZy5kYXRhLm11c3RfZGVsYXkgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtc2cuZGF0YSkge1xyXG4gICAgICAgICAgICBGR2xvYmFsLlVTRVJfSU5GTy5wcmVmZXJlbmNlcyA9IG1zZy5kYXRhLnByZWZlcmVuY2VzO1xyXG4gICAgICAgICAgICBGR2xvYmFsLnNldFByZWZlcmVuY2VzKCk7XHJcbiAgICAgICAgICAgIEZHbG9iYWwuVVNFUl9JTkZPLmludml0ZV9jb2RlID0gbXNnLmRhdGEuaW52aXRlX2NvZGU7XHJcbiAgICAgICAgICAgIGNjLmxvZygnS2Fua2FuICAgICAgJywgbXNnLmRhdGEpXHJcbiAgICAgICAgICAgIEZHbG9iYWwuVVNFUl9JTkZPLmludml0ZV9jb3VudCA9IG1zZy5kYXRhLmludml0ZV9jb3VudDtcclxuICAgICAgICAgICAgRkdsb2JhbC5VU0VSX0lORk8uYmVfaW52aXRlID0gbXNnLmRhdGEucGVyc29uYWwuaW52aXRlZDtcclxuICAgICAgICAgICAgRkdsb2JhbC5VU0VSX0lORk8ubG9naW5fY250ID0gbXNnLmRhdGEubG9naW5fY250O1xyXG4gICAgICAgICAgICBGR2xvYmFsLlVTRVJfSU5GTy5sb2dpbl9kYXlzID0gbXNnLmRhdGEubG9naW5fZGF5cztcclxuICAgICAgICAgICAgRkdsb2JhbC5VU0VSX0lORk8uY3JlZGl0ID0gbXNnLmRhdGEuYmFzaWMuY3JlZGl0O1xyXG4gICAgICAgICAgICBGR2xvYmFsLlVTRVJfSU5GTy5yZWdfdGltZSA9IG1zZy5kYXRhLnJlZ190aW1lO1xyXG4gICAgICAgICAgICBGR2xvYmFsLlVTRVJfSU5GTy5vZmZfdGltZSA9IG1zZy5kYXRhLm9mZmxpbmVfdGltZWxlbjtcclxuICAgICAgICAgICAgRkdsb2JhbC5VU0VSX0lORk8ubG9naW5fdGltZSA9IG1zZy5kYXRhLm5vdztcclxuICAgICAgICAgICAgRkdsb2JhbC5VU0VSX0lORk8udHJhbnNfcmVjb3JkID0gbXNnLmRhdGEuYmFzaWMucmVkZWVtX3Rhc2s7XHJcbiAgICAgICAgICAgIEZHbG9iYWwuVVNFUl9JTkZPLm9ubGluZV90b3RhbCA9IG1zZy5kYXRhLm9ubGluZV90b3RhbDtcclxuICAgICAgICAgICAgRkdsb2JhbC5VU0VSX0lORk8uaXNGbGFnID0gbXNnLmRhdGEuYmFzaWMudXNlcl92aXA7XHJcbiAgICAgICAgICAgIEZHbG9iYWwuVVNFUl9JTkZPLmlzQmxhY2sgPSBtc2cuZGF0YS5iO1xyXG4gICAgICAgICAgICBGR2xvYmFsLlVTRVJfSU5GTy5ub3cgPSBtc2cuZGF0YS5ub3c7XHJcbiAgICAgICAgICAgIEZHbG9iYWwuVVNFUl9JTkZPLmNyZWRpdF9wcCA9IG1zZy5kYXRhLmJhc2ljLmNvaW5zW1wicHBcIl0gPyBtc2cuZGF0YS5iYXNpYy5jb2luc1tcInBwXCJdIDogMDtcclxuICAgICAgICAgICAgRkdsb2JhbC5VU0VSX0lORk8uY3JlZGl0X2dwID0gbXNnLmRhdGEuYmFzaWMuY29pbnNbXCJncFwiXSA/IG1zZy5kYXRhLmJhc2ljLmNvaW5zW1wiZ3BcIl0gOiAwO1xyXG4gICAgICAgICAgICBpZiAobXNnLmRhdGEuY29uZl9oYXNoKSB7XHJcbiAgICAgICAgICAgICAgICBGQ29uZmlnLmNvbmZfaGFzaCA9IG1zZy5kYXRhLmNvbmZfaGFzaDtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjb25mX2hhc2gnLCBGQ29uZmlnLmNvbmZfaGFzaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1zZy5kYXRhLmdhbWVfc2V0dGluZ3NfaW5mbyAmJiBtc2cuZGF0YS5nYW1lX3NldHRpbmdzX2luZm8uemlwKSB7XHJcbiAgICAgICAgICAgICAgICBGQ29uZmlnLmdhbWVfc2V0dGluZ3NfaW5mbyA9IG1zZy5kYXRhLmdhbWVfc2V0dGluZ3NfaW5mbztcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lX3NldHRpbmdzX2luZm8nLCBKU09OLnN0cmluZ2lmeShGQ29uZmlnLmdhbWVfc2V0dGluZ3NfaW5mbykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtc2cuZGF0YS5jb25mKSB7XHJcbiAgICAgICAgICAgICAgICBGQ29uZmlnLmNvbmYgPSBtc2cuZGF0YS5jb25mO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NvbmYnLCBKU09OLnN0cmluZ2lmeShGQ29uZmlnLmNvbmYpKTtcclxuICAgICAgICAgICAgICAgIEZMb2cubm9ybWFsKFwi55yL55yL6YWN572uMiAgIFwiLCBtc2cuZGF0YS5jb25mKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBGR2xvYmFsLnNldENvbmYoKTtcclxuXHJcbiAgICAgICAgICAgIC8v5piv5ZCm56ys5LqM5aSp6YeN572uXHJcbiAgICAgICAgICAgIGlmIChGR2xvYmFsLmdldERhdGVEYXkoRkdsb2JhbC5VU0VSX0lORk8ubG9naW5fdGltZSAtIEZHbG9iYWwuVVNFUl9JTkZPLm9mZl90aW1lKSA8IEZHbG9iYWwuZ2V0RGF0ZURheShGR2xvYmFsLlVTRVJfSU5GTy5sb2dpbl90aW1lKSkge1xyXG4gICAgICAgICAgICAgICAgRkdsb2JhbC5yZXNldERhdGEoKTtcclxuICAgICAgICAgICAgICAgIEZHbG9iYWwuVVNFUl9JTkZPLmlzTmV4dERheSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBGR2xvYmFsLlVTRVJfSU5GTy5pc05leHREYXkgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuT05MSU5FX1RJTUUgJiYgIUZHbG9iYWwuVVNFUl9JTkZPLnByZWZlcmVuY2VzWydyZWFsJ10pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuT05MSU5FX1RJTUUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgRkdsb2JhbC5VU0VSX0lORk8ub25saW5lX3RvdGFsKys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEZHbG9iYWwuVVNFUl9JTkZPLm9ubGluZV90b3RhbCA+PSBGQ29uZmlnLkZTREtfQ09ORi5SRUFMX1VTRVIub25saW5lX3RpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRlNESy5zZXRBY3RpdmVVc2VyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMTAwMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYi5jYWxsKHRhcmdldCwgRkdsb2JhbC5VU0VSX0lORk8pO1xyXG4gICAgICAgIEZOYXRpdmUucHJlbG9hZFZpZGVvKEZDb25maWcuRlNES19DT05GLkFEX0NPTkYudmlkZW8pO1xyXG4gICAgICAgIEZOYXRpdmUucHJlbG9hZEludGVycyhGQ29uZmlnLkZTREtfQ09ORi5BRF9DT05GLmludGVycyk7XHJcbiAgICAgICAgRlNESy51bWVuZ0V2ZW50KFwic2VydmVyX3N1Y1wiLCBcIjBcIik7XHJcblxyXG5cclxuICAgICAgICAvL+aPkuWxj+aXtumXtOmqjOivgVxyXG4gICAgICAgIGxldCBsaW5lVGltZSA9IEZHbG9iYWwuVVNFUl9JTkZPLm5vdyAtIEZHbG9iYWwuVVNFUl9JTkZPLnJlZ190aW1lO1xyXG4gICAgICAgIGlmIChGQ29uZmlnLkZTREtfQ09ORi5BRF9DT05GLmludGVyc19mcmVzaF90aW1lLnN0YXIgLSBsaW5lVGltZSA+IDApIHtcclxuICAgICAgICAgICAgRk5hdGl2ZS5pbnRlcnNfZnJlc2hfdGltZSA9IEZDb25maWcuRlNES19DT05GLkFEX0NPTkYuaW50ZXJzX2ZyZXNoX3RpbWUuc3RhciAtIGxpbmVUaW1lICsgRkNvbmZpZy5GU0RLX0NPTkYuQURfQ09ORi5pbnRlcnNfZnJlc2hfdGltZVtGU0RLLmdldFVzZXJUeXBlKCldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgRk5hdGl2ZS5pbnRlcnNfZnJlc2hfdGltZSA9IEZDb25maWcuRlNES19DT05GLkFEX0NPTkYuaW50ZXJzX2ZyZXNoX3RpbWVbRlNESy5nZXRVc2VyVHlwZSgpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgRk5hdGl2ZS5mcmVzaEludGVycygpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvL2NyZWRpdOabtOaWsOS/oeaBr1xyXG4gICAgcHJpdmF0ZSBvbl9TMkNfdXBkYXRlX2NyZWRpdChtc2cpIHtcclxuICAgICAgICBpZiAobXNnLmVycikge1xyXG4gICAgICAgICAgICBGU0RLLnNob3dUb2FzdChtc2cuZXJyKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgY2hhbmdlID0gMDtcclxuICAgICAgICBpZiAobXNnLmRhdGEpIHtcclxuICAgICAgICAgICAgY2hhbmdlID0gbXNnLmRhdGEuY3JlZGl0IC0gRkdsb2JhbC5VU0VSX0lORk8uY3JlZGl0O1xyXG4gICAgICAgICAgICBGR2xvYmFsLlVTRVJfSU5GTy5jcmVkaXQgPSBtc2cuZGF0YS5jcmVkaXQ7XHJcbiAgICAgICAgICAgIGlmIChGR2xvYmFsLlVTRVJfSU5GTy5jcmVkaXQgPj0gMTAwMDAwKSB7XHJcbiAgICAgICAgICAgICAgICBGU0RLLnVtZW5nRXZlbnQoRkNvbmZpZy5VTUVOR19DT05GSUcuUmVkZWVtX2NvaW5fMTAwMDAwLCBcIjFcIiwgdHJ1ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoRkdsb2JhbC5VU0VSX0lORk8uY3JlZGl0ID49IDIyNTAwMCkge1xyXG4gICAgICAgICAgICAgICAgRlNESy51bWVuZ0V2ZW50KEZDb25maWcuVU1FTkdfQ09ORklHLlJlZGVlbV9jb2luXzIyNTAwMCwgXCIxXCIsIHRydWUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKEZHbG9iYWwuVVNFUl9JTkZPLmNyZWRpdCA+PSA0MDAwMDApIHtcclxuICAgICAgICAgICAgICAgIEZTREsudW1lbmdFdmVudChGQ29uZmlnLlVNRU5HX0NPTkZJRy5SZWRlZW1fY29pbl80MDAwMDAsIFwiMVwiLCB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBcImNyZWRpdFwiLFxyXG4gICAgICAgICAgICBudW06IEZHbG9iYWwuVVNFUl9JTkZPLmNyZWRpdCxcclxuICAgICAgICAgICAgY2hhbmdlOiBjaGFuZ2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNjLmRpcmVjdG9yLmVtaXQoRkV2ZW50SUQuRlJFU0hfQ1JFRElULCBkYXRhKVxyXG4gICAgfVxyXG5cclxuICAgIC8v5YW25a6DY3JlZGl05pu05paw5L+h5oGvXHJcbiAgICBwcml2YXRlIG9uX1MyQ191cGRhdGVfY29pbihtc2cpIHtcclxuICAgICAgICBpZiAobXNnLmVycikge1xyXG4gICAgICAgICAgICBGU0RLLnNob3dUb2FzdChtc2cuZXJyKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgY2hhbmdlID0gMDtcclxuICAgICAgICBpZiAobXNnLmRhdGEpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChtc2cuZGF0YS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdwcCc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlID0gbXNnLmRhdGEuY29pbiAtIEZHbG9iYWwuVVNFUl9JTkZPLmNyZWRpdF9wcDtcclxuICAgICAgICAgICAgICAgICAgICBGR2xvYmFsLlVTRVJfSU5GTy5jcmVkaXRfcHAgPSBtc2cuZGF0YS5jb2luO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChGR2xvYmFsLlVTRVJfSU5GTy5jcmVkaXRfcHAgPj0gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZTREsudW1lbmdFdmVudChGQ29uZmlnLlVNRU5HX0NPTkZJRy5SZWRlZW1fcHBfMTAwLCBcIjFcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIEZHbG9iYWwuVVNFUl9JTkZPLmNhcmRHZXQucHArKztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRkdsb2JhbC5VU0VSX0lORk8uY2FyZEdldC5wcCA+PSA0OTcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRlNESy51bWVuZ0V2ZW50KEZDb25maWcuVU1FTkdfQ09ORklHLlJlZGVlbV9wcF9tYXgsIFwiMVwiLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2dwJzpcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2UgPSBtc2cuZGF0YS5jb2luIC0gRkdsb2JhbC5VU0VSX0lORk8uY3JlZGl0X2dwO1xyXG4gICAgICAgICAgICAgICAgICAgIEZHbG9iYWwuVVNFUl9JTkZPLmNyZWRpdF9ncCA9IG1zZy5kYXRhLmNvaW47XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEZHbG9iYWwuVVNFUl9JTkZPLmNyZWRpdF9ncCA+PSAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRlNESy51bWVuZ0V2ZW50KEZDb25maWcuVU1FTkdfQ09ORklHLlJlZGVlbV9ncF8xMDAsIFwiMVwiLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgRkdsb2JhbC5VU0VSX0lORk8uY2FyZEdldC5ncCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChGR2xvYmFsLlVTRVJfSU5GTy5jYXJkR2V0LmdwID49IDQ5Nykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGU0RLLnVtZW5nRXZlbnQoRkNvbmZpZy5VTUVOR19DT05GSUcuUmVkZWVtX2dwX21heCwgXCIxXCIsIHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBtc2cuZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICBudW06IEZHbG9iYWwuVVNFUl9JTkZPW1wiY3JlZGl0X1wiICsgbXNnLmRhdGEubmFtZV0sXHJcbiAgICAgICAgICAgIGNoYW5nZTogY2hhbmdlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBGU0RLLnNhdmVEYXRhKFwiQ0FSRF9HRVRcIiwgRkdsb2JhbC5VU0VSX0lORk8uY2FyZEdldCk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3IuZW1pdChGRXZlbnRJRC5GUkVTSF9DUkVESVQsIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v6L+U5Zue5L+h5oGv5ZCM5q2l5pWw5o2uXHJcbiAgICBwcml2YXRlIG9uX1MyQ19pbmZvKG1zZykge1xyXG4gICAgICAgIGlmIChtc2cuZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1zZy5kYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChtc2cuZGF0YS5iYXNpYykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1zZy5kYXRhLmJhc2ljLnVzZXJfdmlwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgRkdsb2JhbC5VU0VSX0lORk8uaXNGbGFnID0gbXNnLmRhdGEuYmFzaWMudXNlcl92aXA7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuZW1pdChGRXZlbnRJRC5GUkVTSF9GTEFHLCBGR2xvYmFsLlVTRVJfSU5GTy5pc0ZsYWcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1zZy5kYXRhLmJhc2ljLmNyZWRpdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIEZHbG9iYWwuVVNFUl9JTkZPLmNyZWRpdCA9IG1zZy5kYXRhLmJhc2ljLmNyZWRpdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobXNnLmRhdGEuaW52aXRlKSB7XHJcbiAgICAgICAgICAgICAgICBGR2xvYmFsLlVTRVJfSU5GTy5pbnZpdGVfY291bnQgPSBtc2cuZGF0YS5pbnZpdGUuY291bnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAobXNnLmRhdGEuaW52aXRlLnRhc2spIHtcclxuICAgICAgICAgICAgICAgICAgICBGR2xvYmFsLmludml0ZV90YXNrID0gbXNnLmRhdGEuaW52aXRlLnRhc2s7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1zZy5kYXRhLmNvaW5zKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5lbWl0KEZFdmVudElELkNBUkRfUkVDT1JELCBtc2cuZGF0YS5jb2lucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IuZW1pdChGRXZlbnRJRC5GUkVTSF9VU0VSSU5GTywgbXNnLmRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uX1MyQ19pbnZpdGVkKG1zZykge1xyXG4gICAgICAgIGlmIChtc2cuZXJyKSB7XHJcbiAgICAgICAgICAgIEZTREsuc2hvd1RvYXN0KG1zZy5lcnIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25fUzJDX3RyYW5zX2hpc3RvcnkobXNnKSB7XHJcbiAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHJlZGVlbV90YXNrOiBGQ29uZmlnLmNvbmYucmVkZWVtX3Rhc2ssXHJcbiAgICAgICAgICAgIGhpc3Rvcnk6IG51bGxcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1zZy5lcnIpIHtcclxuICAgICAgICAgICAgZGF0YS5oaXN0b3J5ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGEuaGlzdG9yeSA9IG1zZy5kYXRhLnJlY29yZHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChGTG9naWMuZ2V0SW5zdGFuY2UoKS5jYkxpc3RbRkV2ZW50SUQuUzJDX3RyYW5zX2hpc3RvcnldKSB7XHJcbiAgICAgICAgICAgIEZMb2dpYy5nZXRJbnN0YW5jZSgpLmNiTGlzdFtGRXZlbnRJRC5TMkNfdHJhbnNfaGlzdG9yeV0uY2IuY2FsbChGTG9naWMuZ2V0SW5zdGFuY2UoKS5jYkxpc3RbRkV2ZW50SUQuUzJDX3RyYW5zX2hpc3RvcnldLnRhcmdldCwgZGF0YSk7XHJcbiAgICAgICAgICAgIEZMb2dpYy5nZXRJbnN0YW5jZSgpLmNiTGlzdFtGRXZlbnRJRC5TMkNfdHJhbnNfaGlzdG9yeV0gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uX1MyQ19wZ191c2VyX2NudChtc2cpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IG51bGw7XHJcbiAgICAgICAgaWYgKG1zZy5lcnIpIHtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhID0gbXNnLmRhdGEuaW5mbztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKEZMb2dpYy5nZXRJbnN0YW5jZSgpLmNiTGlzdFtGRXZlbnRJRC5TMkNfcGdfdXNlcl9jbnRdKSB7XHJcbiAgICAgICAgICAgIEZMb2dpYy5nZXRJbnN0YW5jZSgpLmNiTGlzdFtGRXZlbnRJRC5TMkNfcGdfdXNlcl9jbnRdLmNiKGRhdGEpO1xyXG4gICAgICAgICAgICBGTG9naWMuZ2V0SW5zdGFuY2UoKS5jYkxpc3RbRkV2ZW50SUQuUzJDX3BnX3VzZXJfY250XSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25fUzJDX3RyYW5zKG1zZykge1xyXG4gICAgICAgIGlmIChtc2cuZXJyKSB7XHJcbiAgICAgICAgICAgIEZTREsuc2hvd1RvYXN0KG1zZy5lcnIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKEZMb2dpYy5nZXRJbnN0YW5jZSgpLmNiTGlzdFtGRXZlbnRJRC5TMkNfdHJhbnNdKSB7XHJcbiAgICAgICAgICAgICAgICBGTG9naWMuZ2V0SW5zdGFuY2UoKS5jYkxpc3RbRkV2ZW50SUQuUzJDX3RyYW5zXS5jYigpO1xyXG4gICAgICAgICAgICAgICAgRkxvZ2ljLmdldEluc3RhbmNlKCkuY2JMaXN0W0ZFdmVudElELlMyQ190cmFuc10gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19