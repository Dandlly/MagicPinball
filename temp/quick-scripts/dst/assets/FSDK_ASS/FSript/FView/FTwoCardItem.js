
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/FSDK_ASS/FSript/FView/FTwoCardItem.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'c26f8IRrUVHnpYeKbZH+Swq', 'FTwoCardItem');
// FSDK_ASS/FSript/FView/FTwoCardItem.ts

"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var FGlobal_1 = require("../FModel/FGlobal");
var _a = cc._decorator, ccclass = _a.ccclass, property = _a.property;
var FTwoCardItem = /** @class */ (function (_super) {
    __extends(FTwoCardItem, _super);
    function FTwoCardItem() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.mCard = null;
        _this.mTip1 = null;
        _this.mTip2 = null;
        _this.mTip3 = null;
        _this.mTip4 = null;
        _this.mPro = null;
        _this.mProLabel = null;
        _this.mHelpBtn = null;
        _this.mTransBtn = null;
        _this.mStatus = null;
        _this.mErrSound = null;
        _this.type = 0;
        _this.pos = 1;
        _this.mFTwoCard = null;
        return _this;
    }
    FTwoCardItem.prototype.onLoad = function () {
        this.mTransBtn.node.on(cc.Node.EventType.TOUCH_END, this.clickTrans, this);
        this.mHelpBtn.on(cc.Node.EventType.TOUCH_START, this.clickHelp, this);
        this.mStatus.node.active = false;
        cc.director.on(FEventID.S2C_trans_history, this.on_S2C_trans_history, this);
    };
    FTwoCardItem.prototype.on_S2C_trans_history = function (msg) {
        if (!msg.err && msg.data.type == 'twocard') {
            for (var i = 0; i < msg.data.records.length; i++) {
                if (msg.data.records[i].custom_id == FConfig.FSDK_CONF.TWO_CARD.cardList[this.type][this.pos - 1]) {
                    this.setStatus(msg.data.records[i]);
                }
            }
        }
    };
    //type 0-pp 1-gp 2-ap
    FTwoCardItem.prototype.setData = function (type, cardSp, parent) {
        this.mFTwoCard = parent;
        this.type = type;
        this.mCard.spriteFrame = cardSp;
        FLog.normal("什么吗   ", FConfig.FSDK_CONF.word);
        if (this.pos == 1) {
            this.mTip3.string = "Step1: " + FConfig.FSDK_CONF.TWO_CARD.card1.target[0].title + "\nStep2: " + FConfig.FSDK_CONF.TWO_CARD.card1.target[1].title + "\nStep3: " + FConfig.FSDK_CONF.TWO_CARD.card1.target[2].title;
        }
        else {
            this.mTip3.string = FGlobal_1.FGlobal.exWenzi(FConfig.FSDK_CONF.word.tip8, 500);
        }
        this.getTargetPos();
        if (FGlobal_1.FGlobal.USER_INFO.trans_record['twocard']) {
            for (var i = 0; i < FGlobal_1.FGlobal.USER_INFO.trans_record.twocard.length; i++) {
                if (FGlobal_1.FGlobal.USER_INFO.trans_record.twocard[i] == FConfig.FSDK_CONF.TWO_CARD.cardList[this.type][this.pos - 1]) {
                    this.setStatus({ status: 0 });
                    return;
                }
            }
        }
        this.mTransBtn.node.active = true;
        this.mStatus.node.active = false;
    };
    //完成到哪一步
    FTwoCardItem.prototype.getTargetPos = function () {
        if (this.pos == 1) {
            this.mHelpBtn.active = false;
        }
        var target = [FGlobal_1.FGlobal.USER_INFO.credit_pp, FGlobal_1.FGlobal.USER_INFO.task, FGlobal_1.FGlobal.USER_INFO.login_days];
        if (this.type != 0) {
            target[0] = FGlobal_1.FGlobal.USER_INFO.credit_gp;
        }
        var taskPos = -1;
        for (var i = 0; i < FConfig.FSDK_CONF.TWO_CARD['card' + this.pos].target.length; i++) {
            if (target[i] < FConfig.FSDK_CONF.TWO_CARD['card' + this.pos].target[i].cnt) {
                this.mTip2.string = FGlobal_1.FGlobal.exWenzi(FConfig.FSDK_CONF.TWO_CARD['card' + this.pos].target[i].title, target[i]);
                this.mTransBtn.interactable = false;
                taskPos = i;
                break;
            }
            else {
                if (i == 0) {
                    this.mTip3.string = "Step1: " + FConfig.FSDK_CONF.TWO_CARD.card1.target[0].title + "\nStep2: " + FConfig.FSDK_CONF.TWO_CARD.card1.target[1].title;
                }
                else if (i == 1) {
                    this.mTip3.string = "Step1: " + FConfig.FSDK_CONF.TWO_CARD.card1.target[0].title + "\nStep2: " + FConfig.FSDK_CONF.TWO_CARD.card1.target[1].title + "\nStep3: " + FConfig.FSDK_CONF.TWO_CARD.card1.target[2].title;
                }
                if (i == FConfig.FSDK_CONF.TWO_CARD['card' + this.pos].target.length - 1) {
                    taskPos = i;
                    FLog.normal("任务没有达成呢true");
                    this.mTransBtn.interactable = true;
                    this.mTip2.string = "";
                }
            }
        }
        this.mPro.progress = target[taskPos] / FConfig.FSDK_CONF.TWO_CARD['card' + this.pos].target[taskPos].cnt;
        if (taskPos == 0) {
            this.mProLabel.string = "$" + target[0].toFixed(2) + "/$" + FConfig.FSDK_CONF.TWO_CARD['card' + this.pos].target[taskPos].cnt.toFixed(2);
        }
        else {
            this.mProLabel.string = target[taskPos] + "/" + FConfig.FSDK_CONF.TWO_CARD['card' + this.pos].target[taskPos].cnt;
            if (this.pos == 1) {
                this.mHelpBtn.active = true;
            }
        }
    };
    FTwoCardItem.prototype.setCnt = function (cnt) {
        var num = 0;
        if (this.type == 0) {
            if (this.pos == 1) {
                num = Math.floor(cnt * 0.025 + 211);
            }
            else {
                num = Math.floor(cnt * 0.003 + 12);
            }
        }
        else {
            if (this.pos == 1) {
                num = Math.floor(cnt * 0.033 + 174);
            }
            else {
                num = Math.floor(cnt * 0.004 + 8);
            }
        }
        this.mTip1.string = FGlobal_1.FGlobal.exWenzi(FConfig.FSDK_CONF.word.tip6, num);
        this.mTip4.string = this.mTip1.string + ",keep it up!";
    };
    FTwoCardItem.prototype.onEnable = function () {
        // this.mTip4.node.parent.stopAllActions();
        this.mTip4.node.parent.active = false;
    };
    //点击了问号
    FTwoCardItem.prototype.clickHelp = function () {
        this.mTip4.node.parent.active = !this.mTip4.node.parent.active;
        // this.mTip4.node.parent.stopAllActions();
        // this.mTip4.node.parent.active = true;
        // this.mTip4.node.parent.opacity = 0;
        // cc.tween(this.mTip4.node.parent)
        //     .to(0.05, { opacity: 255 })
        //     .start();
    };
    FTwoCardItem.prototype.closeHelp = function () {
        // this.mTip4.node.parent.stopAllActions();
        // this.mTip4.node.parent.active = true;
        // cc.tween(this.mTip4.node.parent)
        //     .to(0.05, { opacity: 0 })
        //     .start();
    };
    //点击了out
    FTwoCardItem.prototype.clickTrans = function () {
        var _this = this;
        if (this.mTransBtn.interactable) {
            // if (this.type != 0) {
            //     FSDK.showToast(FConfig.FSDK_CONF.word.tip9);
            //     return;
            // }
            FLog.normal("啥玩意儿啊  ", this.type, this.pos);
            var data = this.getGift(FConfig.FSDK_CONF.TWO_CARD.cardList[this.type][this.pos - 1]);
            FSDK.showTransPage(this.mFTwoCard.node, data, function () {
                _this.mStatus.node.active = true;
                _this.mTransBtn.node.active = false;
                if (!FGlobal_1.FGlobal.USER_INFO.trans_record.twocard) {
                    FGlobal_1.FGlobal.USER_INFO.trans_record.twocard = [];
                }
                FGlobal_1.FGlobal.USER_INFO.trans_record.twocard.push(FConfig.FSDK_CONF.TWO_CARD.cardList[_this.type][_this.pos - 1]);
            }, 'twocard', false);
        }
        else {
            if (FGlobal_1.FGlobal.USER_INFO.setting.sound) {
                this.mErrSound.play();
            }
            FLog.normal("任务没有达成呢");
            this.noSuc();
        }
    };
    //取出礼物
    FTwoCardItem.prototype.getGift = function (id) {
        for (var i = 0; i < FConfig.conf.redeem_task.twocard.length; i++) {
            if (id == FConfig.conf.redeem_task.twocard[i].id) {
                return FConfig.conf.redeem_task.twocard[i];
            }
        }
    };
    //提示没完成
    FTwoCardItem.prototype.noSuc = function () {
        this.mTip2.node.stopAllActions();
        this.mTip2.node.scale = 1;
        cc.tween(this.mTip2.node)
            .to(0.15, { scale: 1.1 })
            .to(0.2, { scale: 1 })
            .start();
    };
    FTwoCardItem.prototype.setStatus = function (data) {
        FLog.normal("有没有进来");
        var stutas = 'Processing';
        var color = 'FF8F00';
        switch (data.status) {
            case 0:
                stutas = 'Processing';
                color = 'FF8F00';
                break;
            case 1:
                stutas = 'Finish';
                color = '15C323';
                break;
            case 2:
                stutas = 'In Review';
                color = 'FF8F00';
                break;
            case -1:
                stutas = 'Refuse';
                color = 'D32424';
                break;
            case -2:
                stutas = 'GetFail';
                color = 'D32424';
                break;
        }
        this.mTransBtn.node.active = false;
        this.mStatus.node.active = true;
        this.mStatus.string = stutas;
        this.mStatus.node.color = new cc.Color().fromHEX(color);
    };
    __decorate([
        property(cc.Sprite)
    ], FTwoCardItem.prototype, "mCard", void 0);
    __decorate([
        property(cc.RichText)
    ], FTwoCardItem.prototype, "mTip1", void 0);
    __decorate([
        property(cc.RichText)
    ], FTwoCardItem.prototype, "mTip2", void 0);
    __decorate([
        property(cc.RichText)
    ], FTwoCardItem.prototype, "mTip3", void 0);
    __decorate([
        property(cc.RichText)
    ], FTwoCardItem.prototype, "mTip4", void 0);
    __decorate([
        property(cc.ProgressBar)
    ], FTwoCardItem.prototype, "mPro", void 0);
    __decorate([
        property(cc.Label)
    ], FTwoCardItem.prototype, "mProLabel", void 0);
    __decorate([
        property(cc.Node)
    ], FTwoCardItem.prototype, "mHelpBtn", void 0);
    __decorate([
        property(cc.Button)
    ], FTwoCardItem.prototype, "mTransBtn", void 0);
    __decorate([
        property(cc.Label)
    ], FTwoCardItem.prototype, "mStatus", void 0);
    __decorate([
        property(cc.AudioSource)
    ], FTwoCardItem.prototype, "mErrSound", void 0);
    __decorate([
        property
    ], FTwoCardItem.prototype, "pos", void 0);
    FTwoCardItem = __decorate([
        ccclass
    ], FTwoCardItem);
    return FTwoCardItem;
}(cc.Component));
exports.FTwoCardItem = FTwoCardItem;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcRlNES19BU1NcXEZTcmlwdFxcRlZpZXdcXEZUd29DYXJkSXRlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSw2Q0FBNEM7QUFHdEMsSUFBQSxrQkFBcUMsRUFBbkMsb0JBQU8sRUFBRSxzQkFBMEIsQ0FBQztBQUc1QztJQUFrQyxnQ0FBWTtJQUQ5QztRQUFBLHFFQStPQztRQTVPRyxXQUFLLEdBQWMsSUFBSSxDQUFDO1FBRXhCLFdBQUssR0FBZ0IsSUFBSSxDQUFDO1FBRTFCLFdBQUssR0FBZ0IsSUFBSSxDQUFDO1FBRTFCLFdBQUssR0FBZ0IsSUFBSSxDQUFDO1FBRTFCLFdBQUssR0FBZ0IsSUFBSSxDQUFDO1FBRTFCLFVBQUksR0FBbUIsSUFBSSxDQUFDO1FBRTVCLGVBQVMsR0FBYSxJQUFJLENBQUM7UUFFM0IsY0FBUSxHQUFZLElBQUksQ0FBQztRQUV6QixlQUFTLEdBQWMsSUFBSSxDQUFDO1FBRTVCLGFBQU8sR0FBYSxJQUFJLENBQUM7UUFFekIsZUFBUyxHQUFtQixJQUFJLENBQUM7UUFDakMsVUFBSSxHQUFHLENBQUMsQ0FBQztRQUVULFNBQUcsR0FBRyxDQUFDLENBQUM7UUFDUixlQUFTLEdBQWEsSUFBSSxDQUFDOztJQW9OL0IsQ0FBQztJQW5ORyw2QkFBTSxHQUFOO1FBQ0ksSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzNFLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3RFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0s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Q0FDSTtJQUUxQjtRQURDLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDOytDQUNJO0lBRTFCO1FBREMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUM7K0NBQ0k7SUFFMUI7UUFEQyxRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQzsrQ0FDSTtJQUUxQjtRQURDLFFBQVEsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDOzhDQUNHO0lBRTVCO1FBREMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUM7bURBQ1E7SUFFM0I7UUFEQyxRQUFRLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQztrREFDTztJQUV6QjtRQURDLFFBQVEsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDO21EQUNRO0lBRTVCO1FBREMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUM7aURBQ007SUFFekI7UUFEQyxRQUFRLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQzttREFDUTtJQUdqQztRQURDLFFBQVE7NkNBQ0Q7SUF6QkMsWUFBWTtRQUR4QixPQUFPO09BQ0ssWUFBWSxDQThPeEI7SUFBRCxtQkFBQztDQTlPRCxBQThPQyxDQTlPaUMsRUFBRSxDQUFDLFNBQVMsR0E4TzdDO0FBOU9ZLG9DQUFZIiwiZmlsZSI6IiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRkdsb2JhbCB9IGZyb20gXCIuLi9GTW9kZWwvRkdsb2JhbFwiO1xyXG5pbXBvcnQgeyBGVHdvQ2FyZCB9IGZyb20gXCIuL0ZUd29DYXJkXCI7XHJcblxyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5IH0gPSBjYy5fZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3NcclxuZXhwb3J0IGNsYXNzIEZUd29DYXJkSXRlbSBleHRlbmRzIGNjLkNvbXBvbmVudCB7XHJcbiAgICBAcHJvcGVydHkoY2MuU3ByaXRlKVxyXG4gICAgbUNhcmQ6IGNjLlNwcml0ZSA9IG51bGw7XHJcbiAgICBAcHJvcGVydHkoY2MuUmljaFRleHQpXHJcbiAgICBtVGlwMTogY2MuUmljaFRleHQgPSBudWxsO1xyXG4gICAgQHByb3BlcnR5KGNjLlJpY2hUZXh0KVxyXG4gICAgbVRpcDI6IGNjLlJpY2hUZXh0ID0gbnVsbDtcclxuICAgIEBwcm9wZXJ0eShjYy5SaWNoVGV4dClcclxuICAgIG1UaXAzOiBjYy5SaWNoVGV4dCA9IG51bGw7XHJcbiAgICBAcHJvcGVydHkoY2MuUmljaFRleHQpXHJcbiAgICBtVGlwNDogY2MuUmljaFRleHQgPSBudWxsO1xyXG4gICAgQHByb3BlcnR5KGNjLlByb2dyZXNzQmFyKVxyXG4gICAgbVBybzogY2MuUHJvZ3Jlc3NCYXIgPSBudWxsO1xyXG4gICAgQHByb3BlcnR5KGNjLkxhYmVsKVxyXG4gICAgbVByb0xhYmVsOiBjYy5MYWJlbCA9IG51bGw7XHJcbiAgICBAcHJvcGVydHkoY2MuTm9kZSlcclxuICAgIG1IZWxwQnRuOiBjYy5Ob2RlID0gbnVsbDtcclxuICAgIEBwcm9wZXJ0eShjYy5CdXR0b24pXHJcbiAgICBtVHJhbnNCdG46IGNjLkJ1dHRvbiA9IG51bGw7XHJcbiAgICBAcHJvcGVydHkoY2MuTGFiZWwpXHJcbiAgICBtU3RhdHVzOiBjYy5MYWJlbCA9IG51bGw7XHJcbiAgICBAcHJvcGVydHkoY2MuQXVkaW9Tb3VyY2UpXHJcbiAgICBtRXJyU291bmQ6IGNjLkF1ZGlvU291cmNlID0gbnVsbDtcclxuICAgIHR5cGUgPSAwO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwb3MgPSAxO1xyXG4gICAgbUZUd29DYXJkOiBGVHdvQ2FyZCA9IG51bGw7XHJcbiAgICBvbkxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5tVHJhbnNCdG4ubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIHRoaXMuY2xpY2tUcmFucywgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5tSGVscEJ0bi5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5jbGlja0hlbHAsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubVN0YXR1cy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIGNjLmRpcmVjdG9yLm9uKEZFdmVudElELlMyQ190cmFuc19oaXN0b3J5LCB0aGlzLm9uX1MyQ190cmFuc19oaXN0b3J5LCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvbl9TMkNfdHJhbnNfaGlzdG9yeShtc2cpIHtcclxuICAgICAgICBpZiAoIW1zZy5lcnIgJiYgbXNnLmRhdGEudHlwZSA9PSAndHdvY2FyZCcpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtc2cuZGF0YS5yZWNvcmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobXNnLmRhdGEucmVjb3Jkc1tpXS5jdXN0b21faWQgPT0gRkNvbmZpZy5GU0RLX0NPTkYuVFdPX0NBUkQuY2FyZExpc3RbdGhpcy50eXBlXVt0aGlzLnBvcyAtIDFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMobXNnLmRhdGEucmVjb3Jkc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy90eXBlIDAtcHAgMS1ncCAyLWFwXHJcbiAgICBzZXREYXRhKHR5cGU6IG51bWJlciwgY2FyZFNwOiBjYy5TcHJpdGVGcmFtZSwgcGFyZW50OiBGVHdvQ2FyZCkge1xyXG4gICAgICAgIHRoaXMubUZUd29DYXJkID0gcGFyZW50O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tQ2FyZC5zcHJpdGVGcmFtZSA9IGNhcmRTcDtcclxuICAgICAgICBGTG9nLm5vcm1hbChcIuS7gOS5iOWQlyAgIFwiLCBGQ29uZmlnLkZTREtfQ09ORi53b3JkKVxyXG4gICAgICAgIGlmICh0aGlzLnBvcyA9PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMubVRpcDMuc3RyaW5nID0gYFN0ZXAxOiAke0ZDb25maWcuRlNES19DT05GLlRXT19DQVJELmNhcmQxLnRhcmdldFswXS50aXRsZX1cXG5TdGVwMjogJHtGQ29uZmlnLkZTREtfQ09ORi5UV09fQ0FSRC5jYXJkMS50YXJnZXRbMV0udGl0bGV9XFxuU3RlcDM6ICR7RkNvbmZpZy5GU0RLX0NPTkYuVFdPX0NBUkQuY2FyZDEudGFyZ2V0WzJdLnRpdGxlfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1UaXAzLnN0cmluZyA9IEZHbG9iYWwuZXhXZW56aShGQ29uZmlnLkZTREtfQ09ORi53b3JkLnRpcDgsIDUwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2V0VGFyZ2V0UG9zKCk7XHJcblxyXG4gICAgICAgIGlmIChGR2xvYmFsLlVTRVJfSU5GTy50cmFuc19yZWNvcmRbJ3R3b2NhcmQnXSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEZHbG9iYWwuVVNFUl9JTkZPLnRyYW5zX3JlY29yZC50d29jYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoRkdsb2JhbC5VU0VSX0lORk8udHJhbnNfcmVjb3JkLnR3b2NhcmRbaV0gPT0gRkNvbmZpZy5GU0RLX0NPTkYuVFdPX0NBUkQuY2FyZExpc3RbdGhpcy50eXBlXVt0aGlzLnBvcyAtIDFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoeyBzdGF0dXM6IDAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubVRyYW5zQnRuLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1TdGF0dXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy/lrozmiJDliLDlk6rkuIDmraVcclxuICAgIGdldFRhcmdldFBvcygpIHtcclxuICAgICAgICBpZiAodGhpcy5wb3MgPT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLm1IZWxwQnRuLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdGFyZ2V0OiBudW1iZXJbXSA9IFtGR2xvYmFsLlVTRVJfSU5GTy5jcmVkaXRfcHAsIEZHbG9iYWwuVVNFUl9JTkZPLnRhc2ssIEZHbG9iYWwuVVNFUl9JTkZPLmxvZ2luX2RheXNdO1xyXG4gICAgICAgIGlmICh0aGlzLnR5cGUgIT0gMCkge1xyXG4gICAgICAgICAgICB0YXJnZXRbMF0gPSBGR2xvYmFsLlVTRVJfSU5GTy5jcmVkaXRfZ3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB0YXNrUG9zID0gLTE7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBGQ29uZmlnLkZTREtfQ09ORi5UV09fQ0FSRFsnY2FyZCcgKyB0aGlzLnBvc10udGFyZ2V0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRbaV0gPCBGQ29uZmlnLkZTREtfQ09ORi5UV09fQ0FSRFsnY2FyZCcgKyB0aGlzLnBvc10udGFyZ2V0W2ldLmNudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tVGlwMi5zdHJpbmcgPSBGR2xvYmFsLmV4V2VuemkoRkNvbmZpZy5GU0RLX0NPTkYuVFdPX0NBUkRbJ2NhcmQnICsgdGhpcy5wb3NdLnRhcmdldFtpXS50aXRsZSwgdGFyZ2V0W2ldKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubVRyYW5zQnRuLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGFza1BvcyA9IGk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1UaXAzLnN0cmluZyA9IGBTdGVwMTogJHtGQ29uZmlnLkZTREtfQ09ORi5UV09fQ0FSRC5jYXJkMS50YXJnZXRbMF0udGl0bGV9XFxuU3RlcDI6ICR7RkNvbmZpZy5GU0RLX0NPTkYuVFdPX0NBUkQuY2FyZDEudGFyZ2V0WzFdLnRpdGxlfWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1UaXAzLnN0cmluZyA9IGBTdGVwMTogJHtGQ29uZmlnLkZTREtfQ09ORi5UV09fQ0FSRC5jYXJkMS50YXJnZXRbMF0udGl0bGV9XFxuU3RlcDI6ICR7RkNvbmZpZy5GU0RLX0NPTkYuVFdPX0NBUkQuY2FyZDEudGFyZ2V0WzFdLnRpdGxlfVxcblN0ZXAzOiAke0ZDb25maWcuRlNES19DT05GLlRXT19DQVJELmNhcmQxLnRhcmdldFsyXS50aXRsZX1gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gRkNvbmZpZy5GU0RLX0NPTkYuVFdPX0NBUkRbJ2NhcmQnICsgdGhpcy5wb3NdLnRhcmdldC5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFza1BvcyA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgRkxvZy5ub3JtYWwoXCLku7vliqHmsqHmnInovr7miJDlkaJ0cnVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubVRyYW5zQnRuLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tVGlwMi5zdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubVByby5wcm9ncmVzcyA9IHRhcmdldFt0YXNrUG9zXSAvIEZDb25maWcuRlNES19DT05GLlRXT19DQVJEWydjYXJkJyArIHRoaXMucG9zXS50YXJnZXRbdGFza1Bvc10uY250O1xyXG4gICAgICAgIGlmICh0YXNrUG9zID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5tUHJvTGFiZWwuc3RyaW5nID0gYCQke3RhcmdldFswXS50b0ZpeGVkKDIpfS8kJHtGQ29uZmlnLkZTREtfQ09ORi5UV09fQ0FSRFsnY2FyZCcgKyB0aGlzLnBvc10udGFyZ2V0W3Rhc2tQb3NdLmNudC50b0ZpeGVkKDIpfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1Qcm9MYWJlbC5zdHJpbmcgPSBgJHt0YXJnZXRbdGFza1Bvc119LyR7RkNvbmZpZy5GU0RLX0NPTkYuVFdPX0NBUkRbJ2NhcmQnICsgdGhpcy5wb3NdLnRhcmdldFt0YXNrUG9zXS5jbnR9YDtcclxuICAgICAgICAgICAgaWYgKHRoaXMucG9zID09IDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubUhlbHBCdG4uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRDbnQoY250KSB7XHJcbiAgICAgICAgbGV0IG51bSA9IDA7XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PSAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcyA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBudW0gPSBNYXRoLmZsb29yKGNudCAqIDAuMDI1ICsgMjExKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG51bSA9IE1hdGguZmxvb3IoY250ICogMC4wMDMgKyAxMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcyA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBudW0gPSBNYXRoLmZsb29yKGNudCAqIDAuMDMzICsgMTc0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG51bSA9IE1hdGguZmxvb3IoY250ICogMC4wMDQgKyA4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1UaXAxLnN0cmluZyA9IEZHbG9iYWwuZXhXZW56aShGQ29uZmlnLkZTREtfQ09ORi53b3JkLnRpcDYsIG51bSk7XHJcbiAgICAgICAgdGhpcy5tVGlwNC5zdHJpbmcgPSB0aGlzLm1UaXAxLnN0cmluZyArIFwiLGtlZXAgaXQgdXAhXCI7XHJcbiAgICB9XHJcblxyXG4gICAgb25FbmFibGUoKSB7XHJcbiAgICAgICAgLy8gdGhpcy5tVGlwNC5ub2RlLnBhcmVudC5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIHRoaXMubVRpcDQubm9kZS5wYXJlbnQuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy/ngrnlh7vkuobpl67lj7dcclxuICAgIGNsaWNrSGVscCgpIHtcclxuICAgICAgICB0aGlzLm1UaXA0Lm5vZGUucGFyZW50LmFjdGl2ZSA9ICF0aGlzLm1UaXA0Lm5vZGUucGFyZW50LmFjdGl2ZTtcclxuICAgICAgICAvLyB0aGlzLm1UaXA0Lm5vZGUucGFyZW50LnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgLy8gdGhpcy5tVGlwNC5ub2RlLnBhcmVudC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIC8vIHRoaXMubVRpcDQubm9kZS5wYXJlbnQub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgLy8gY2MudHdlZW4odGhpcy5tVGlwNC5ub2RlLnBhcmVudClcclxuICAgICAgICAvLyAgICAgLnRvKDAuMDUsIHsgb3BhY2l0eTogMjU1IH0pXHJcbiAgICAgICAgLy8gICAgIC5zdGFydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlSGVscCgpIHtcclxuICAgICAgICAvLyB0aGlzLm1UaXA0Lm5vZGUucGFyZW50LnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgLy8gdGhpcy5tVGlwNC5ub2RlLnBhcmVudC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIC8vIGNjLnR3ZWVuKHRoaXMubVRpcDQubm9kZS5wYXJlbnQpXHJcbiAgICAgICAgLy8gICAgIC50bygwLjA1LCB7IG9wYWNpdHk6IDAgfSlcclxuICAgICAgICAvLyAgICAgLnN0YXJ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/ngrnlh7vkuoZvdXRcclxuICAgIGNsaWNrVHJhbnMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubVRyYW5zQnRuLmludGVyYWN0YWJsZSkge1xyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy50eXBlICE9IDApIHtcclxuICAgICAgICAgICAgLy8gICAgIEZTREsuc2hvd1RvYXN0KEZDb25maWcuRlNES19DT05GLndvcmQudGlwOSk7XHJcbiAgICAgICAgICAgIC8vICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgRkxvZy5ub3JtYWwoXCLllaXnjqnmhI/lhL/llYogIFwiLCB0aGlzLnR5cGUsIHRoaXMucG9zKVxyXG4gICAgICAgICAgICBsZXQgZGF0YSA9IHRoaXMuZ2V0R2lmdChGQ29uZmlnLkZTREtfQ09ORi5UV09fQ0FSRC5jYXJkTGlzdFt0aGlzLnR5cGVdW3RoaXMucG9zIC0gMV0pO1xyXG4gICAgICAgICAgICBGU0RLLnNob3dUcmFuc1BhZ2UodGhpcy5tRlR3b0NhcmQubm9kZSwgZGF0YSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tU3RhdHVzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMubVRyYW5zQnRuLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUZHbG9iYWwuVVNFUl9JTkZPLnRyYW5zX3JlY29yZC50d29jYXJkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgRkdsb2JhbC5VU0VSX0lORk8udHJhbnNfcmVjb3JkLnR3b2NhcmQgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEZHbG9iYWwuVVNFUl9JTkZPLnRyYW5zX3JlY29yZC50d29jYXJkLnB1c2goRkNvbmZpZy5GU0RLX0NPTkYuVFdPX0NBUkQuY2FyZExpc3RbdGhpcy50eXBlXVt0aGlzLnBvcyAtIDFdKTtcclxuICAgICAgICAgICAgfSwgJ3R3b2NhcmQnLCBmYWxzZSlcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChGR2xvYmFsLlVTRVJfSU5GTy5zZXR0aW5nLnNvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1FcnJTb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgRkxvZy5ub3JtYWwoXCLku7vliqHmsqHmnInovr7miJDlkaJcIik7XHJcbiAgICAgICAgICAgIHRoaXMubm9TdWMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy/lj5blh7rnpLznialcclxuICAgIGdldEdpZnQoaWQpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEZDb25maWcuY29uZi5yZWRlZW1fdGFzay50d29jYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpZCA9PSBGQ29uZmlnLmNvbmYucmVkZWVtX3Rhc2sudHdvY2FyZFtpXS5pZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZDb25maWcuY29uZi5yZWRlZW1fdGFzay50d29jYXJkW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8v5o+Q56S65rKh5a6M5oiQXHJcbiAgICBub1N1YygpIHtcclxuICAgICAgICB0aGlzLm1UaXAyLm5vZGUuc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgICAgICB0aGlzLm1UaXAyLm5vZGUuc2NhbGUgPSAxO1xyXG4gICAgICAgIGNjLnR3ZWVuKHRoaXMubVRpcDIubm9kZSlcclxuICAgICAgICAgICAgLnRvKDAuMTUsIHsgc2NhbGU6IDEuMSB9KVxyXG4gICAgICAgICAgICAudG8oMC4yLCB7IHNjYWxlOiAxIH0pXHJcbiAgICAgICAgICAgIC5zdGFydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFN0YXR1cyhkYXRhKSB7XHJcbiAgICAgICAgRkxvZy5ub3JtYWwoXCLmnInmsqHmnInov5vmnaVcIilcclxuICAgICAgICBsZXQgc3R1dGFzID0gJ1Byb2Nlc3NpbmcnO1xyXG4gICAgICAgIGxldCBjb2xvciA9ICdGRjhGMDAnO1xyXG4gICAgICAgIHN3aXRjaCAoZGF0YS5zdGF0dXMpIHtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgc3R1dGFzID0gJ1Byb2Nlc3NpbmcnO1xyXG4gICAgICAgICAgICAgICAgY29sb3IgPSAnRkY4RjAwJ1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHN0dXRhcyA9ICdGaW5pc2gnO1xyXG4gICAgICAgICAgICAgICAgY29sb3IgPSAnMTVDMzIzJ1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHN0dXRhcyA9ICdJbiBSZXZpZXcnO1xyXG4gICAgICAgICAgICAgICAgY29sb3IgPSAnRkY4RjAwJ1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgLTE6XHJcbiAgICAgICAgICAgICAgICBzdHV0YXMgPSAnUmVmdXNlJztcclxuICAgICAgICAgICAgICAgIGNvbG9yID0gJ0QzMjQyNCdcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIC0yOlxyXG4gICAgICAgICAgICAgICAgc3R1dGFzID0gJ0dldEZhaWwnO1xyXG4gICAgICAgICAgICAgICAgY29sb3IgPSAnRDMyNDI0J1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubVRyYW5zQnRuLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5tU3RhdHVzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1TdGF0dXMuc3RyaW5nID0gc3R1dGFzO1xyXG4gICAgICAgIHRoaXMubVN0YXR1cy5ub2RlLmNvbG9yID0gbmV3IGNjLkNvbG9yKCkuZnJvbUhFWChjb2xvcik7XHJcbiAgICB9XHJcbn1cclxuIl19