{"version":3,"sources":["assets\\SDK\\script\\SimpleSDK.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport SimpleIOS from './SimpleIOS'\r\nimport SimpleAndroid from './SimpleAndroid'\r\nimport SimpleEditor from './SimpleEditor'\r\nimport * as SDK from './SimpleInterface'\r\nimport SimpleCallback from './SimpleCallback';\r\nimport SimpleUtils from './SimpleUtils';\r\nimport SimpleAnalytics from './SimpleAnalytics';\r\nimport SimpleSDKEvent from './SimpleSDKEvent';\r\nimport SimpleAd from './SimpleAd';\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SimpleSDK extends cc.Component {\r\n\r\n    static CONFIG_FILE_NAME: string = \"SimpleSDKConfig\";\r\n\r\n    adapter: SDK.SimpleInterface = null;\r\n    staticInfo: SDK.StaticInfo = null;\r\n    startConfig: SDK.SimpleConfig = null;\r\n    simpleAnalytics: SimpleAnalytics = new SimpleAnalytics();\r\n    simpleAd: SimpleAd = new SimpleAd();\r\n\r\n    attributionInfo: SDK.AttributionInfo = null;\r\n    attributionInfoCallback: (result: SDK.AttributionInfo) => void;\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    public static instance(): SimpleSDK {\r\n        return get_simple_manager();\r\n    }\r\n\r\n    public static ad_instance(): SimpleAd {\r\n        return get_simple_ad();\r\n    }\r\n\r\n    public static analytics_instance(): SimpleAnalytics {\r\n        return get_simple_analytics();\r\n    }\r\n\r\n    onLoad() {\r\n        cc.game.addPersistRootNode(this.node);\r\n        if (cc.sys.os === cc.sys.OS_IOS) {\r\n            this.adapter = new SimpleIOS();\r\n        }\r\n        else if (cc.sys.os === cc.sys.OS_ANDROID) {\r\n            this.adapter = new SimpleAndroid();\r\n        }\r\n        else {\r\n            this.adapter = new SimpleEditor();\r\n        }\r\n        set_simple_manager(this);\r\n        set_simple_callback(new SimpleCallback());\r\n        SimpleUtils.log(\"sdk setup finish\");\r\n        this.startLoadConfig();\r\n\r\n    }\r\n\r\n    start() {\r\n        SimpleUtils.log('init start node');\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (this.simpleAnalytics != null) {\r\n            this.simpleAnalytics.update(dt);\r\n        }\r\n        if (this.simpleAd != null) {\r\n            this.simpleAd.update(dt);\r\n        }\r\n    }\r\n\r\n    startLoadConfig() {\r\n        cc.loader.loadRes(SimpleSDK.CONFIG_FILE_NAME, cc.JsonAsset, function (err, res) {\r\n            if (err != null) {\r\n                SimpleUtils.log(JSON.stringify(err));\r\n            }\r\n            SimpleSDK.instance().loadConfigSuccess(res);\r\n        });\r\n    }\r\n\r\n    parseConfig(dict: {}): SDK.SimpleConfig {\r\n        if (cc.sys.os === cc.sys.OS_IOS) {\r\n            let config: SDK.SimpleConfig = {\r\n                gameName: SimpleUtils.getDictOrDefault(dict, \"gameName\", \"\"),\r\n                appsflyerkey: SimpleUtils.getDictOrDefault(dict, \"iosAppsflyerkey\", \"\"),\r\n                appleid: SimpleUtils.getDictOrDefault(dict, \"iosAppleid\", \"\"),\r\n                adjustAppkey: SimpleUtils.getDictOrDefault(dict, \"iosAdjustAppkey\", \"\"),\r\n                toponAppid: SimpleUtils.getDictOrDefault(dict, \"iosTopOnAppid\", \"\"),\r\n                toponKey: SimpleUtils.getDictOrDefault(dict, \"iosTopOnKey\", \"\"),\r\n                rewardPlacementId: SimpleUtils.getDictOrDefault(dict, \"iosToponRewardPlacementId\", \"\"),\r\n                interstitialPlacementId: SimpleUtils.getDictOrDefault(dict, \"iosToponInterstitialPlacementId\", \"\"),\r\n                bannePlacementId: SimpleUtils.getDictOrDefault(dict, \"iosToponBannePlacementId\", \"\"),\r\n                bannerWidth: SimpleUtils.getDictOrDefault(dict, \"bannerWidth\", -1),\r\n                bannerHeight: SimpleUtils.getDictOrDefault(dict, \"bannerHeight\", -1),\r\n                debug: SimpleUtils.getDictOrDefault(dict, \"debug\", false),\r\n            }\r\n            if (config.appsflyerkey.length > 0 && config.appleid.length > 0 && config.adjustAppkey.length == 0) {\r\n                cc.log(\"ready to start appsflyer sdk\");\r\n            }\r\n            else if (config.appsflyerkey.length == 0 && config.adjustAppkey.length > 0) {\r\n                cc.log(\"ready to start adjust sdk\");\r\n            }\r\n            return config;\r\n        }\r\n        else if (cc.sys.os === cc.sys.OS_ANDROID) {\r\n            let config: SDK.SimpleConfig = {\r\n                gameName: SimpleUtils.getDictOrDefault(dict, \"gameName\", \"\"),\r\n                appsflyerkey: SimpleUtils.getDictOrDefault(dict, \"androidAppsflyerkey\", \"\"),\r\n                appleid: \"\",\r\n                adjustAppkey: SimpleUtils.getDictOrDefault(dict, \"androidAdjustAppkey\", \"\"),\r\n                toponAppid: SimpleUtils.getDictOrDefault(dict, \"androidTopOnAppid\", \"\"),\r\n                toponKey: SimpleUtils.getDictOrDefault(dict, \"androidTopOnKey\", \"\"),\r\n                rewardPlacementId: SimpleUtils.getDictOrDefault(dict, \"androidToponRewardPlacementId\", \"\"),\r\n                interstitialPlacementId: SimpleUtils.getDictOrDefault(dict, \"androidToponInterstitialPlacementId\", \"\"),\r\n                bannePlacementId: SimpleUtils.getDictOrDefault(dict, \"androidToponBannePlacementId\", \"\"),\r\n                bannerWidth: SimpleUtils.getDictOrDefault(dict, \"bannerWidth\", -1),\r\n                bannerHeight: SimpleUtils.getDictOrDefault(dict, \"bannerHeight\", -1),\r\n                debug: SimpleUtils.getDictOrDefault(dict, \"debug\", false),\r\n            }\r\n            if (config.appsflyerkey.length > 0 && config.adjustAppkey.length == 0) {\r\n                cc.log(\"ready to start appsflyer sdk\");\r\n            }\r\n            else if (config.appsflyerkey.length == 0 && config.adjustAppkey.length > 0) {\r\n                cc.log(\"ready to start adjust sdk\");\r\n            }\r\n            return config;\r\n        }\r\n        else {\r\n            let config: SDK.SimpleConfig = {\r\n                gameName: SimpleUtils.getDictOrDefault(dict, \"gameName\", \"demo\"),\r\n                appsflyerkey: \"\",\r\n                appleid: \"\",\r\n                adjustAppkey: \"\",\r\n                toponAppid: \"\",\r\n                toponKey: \"\",\r\n                rewardPlacementId: \"\",\r\n                interstitialPlacementId: \"\",\r\n                bannePlacementId: \"\",\r\n                bannerWidth: -1,\r\n                bannerHeight: -1,\r\n                debug: true\r\n            }\r\n            return config;\r\n        }\r\n    }\r\n\r\n\r\n    loadConfigSuccess(res) {\r\n        try {\r\n            if (res != null && 'json' in res) {\r\n                let config = this.parseConfig(res.json);\r\n                this.init(config);\r\n            }\r\n            else {\r\n                SimpleUtils.log(\"fail to load json from resources/SimpleSDKConfig.json\")\r\n            }\r\n        }\r\n        catch (err) {\r\n            SimpleUtils.log(\"config load fail\" + err.toString());\r\n        }\r\n\r\n    }\r\n\r\n    init(inputConfig: SDK.SimpleConfig) {\r\n        //load config\r\n        this.startConfig = inputConfig;\r\n        SimpleUtils.setDebug(this.startConfig.debug);\r\n        if (inputConfig.appsflyerkey.length > 0) {\r\n            this.adapter.initWithAppsflyer(inputConfig.appsflyerkey, inputConfig.appleid, inputConfig.debug);\r\n        }\r\n        else {\r\n            this.adapter.initWithAdjust(inputConfig.adjustAppkey, inputConfig.debug);\r\n        }\r\n\r\n    }\r\n\r\n    initSuccess(e: SDK.InitSuccessResult) {\r\n        let platform = \"editor\";\r\n        if (cc.sys.os === cc.sys.OS_IOS) {\r\n            platform = \"ios\";\r\n        }\r\n        else if (cc.sys.os === cc.sys.OS_ANDROID) {\r\n            platform = \"android\";\r\n        }\r\n        let sessionId = e.deviceId + \"_\" + SimpleUtils.getTimestamp() + \"_\" + SimpleUtils.getRandomInt(100)\r\n        let networkStatue = \"none\"\r\n        switch (e.network) {\r\n            case 0: networkStatue = \"none\"; break;\r\n            case 1: networkStatue = \"wifi\"; break;\r\n            case 2: networkStatue = \"4g\"; break;\r\n            default: networkStatue = \"none\";\r\n        }\r\n        this.staticInfo = {\r\n            gameName: this.startConfig.gameName,\r\n            pn: e.package,\r\n            deviceId: e.deviceId,\r\n            platform: platform,\r\n            idfa: e.idfa,\r\n            uid: \"\",\r\n            sessionId: sessionId,\r\n\r\n            idfv: e.idfv,\r\n            android_id: e.android_id,\r\n\r\n            band: e.band,\r\n            model: e.model,\r\n            deviceName: e.deviceName,\r\n            systemVersion: e.systemVersion,\r\n            network: networkStatue\r\n        }\r\n        SimpleUtils.log(\"init succ: \" + JSON.stringify(this.staticInfo));\r\n        this.simpleAnalytics.init(this.staticInfo);\r\n        this.simpleAnalytics.sendLog(SimpleSDKEvent.GAME_START, {\r\n            model: this.staticInfo.model,\r\n            band: this.staticInfo.band\r\n        })\r\n        this.simpleAd.init(this.startConfig);\r\n    }\r\n\r\n    initFailed(e: SDK.SDKError) {\r\n        SimpleUtils.log(\"call fail\");\r\n    }\r\n\r\n    getStaticInfo(): SDK.StaticInfo {\r\n        return this.staticInfo;\r\n    }\r\n\r\n    //归因回调\r\n    innerAttributionInfoCallback(attributionInfo: SDK.AttributionInfo) {\r\n        this.attributionInfo = attributionInfo;\r\n        if (this.attributionInfoCallback != null) {\r\n            this.attributionInfoCallback(this.attributionInfo);\r\n        }\r\n    }\r\n    //异步获取\r\n    setAttributionInfoCallback(attributionInfoCallback: (result: SDK.AttributionInfo) => void) {\r\n        this.attributionInfoCallback = attributionInfoCallback;\r\n        if (this.attributionInfo != null) {\r\n            this.attributionInfoCallback(this.attributionInfo);\r\n        }\r\n    }\r\n    //同步获取\r\n    getAttributionInfo() {\r\n        return this.attributionInfo;\r\n    }\r\n\r\n    getNetworkStatus() {\r\n        return this.adapter.getNetworkStatus();\r\n    }\r\n\r\n    isNetworkOk() {\r\n        let r = this.getNetworkStatus();\r\n        return (undefined != r && r != null && r > 0);\r\n    }\r\n}\r\n"]}