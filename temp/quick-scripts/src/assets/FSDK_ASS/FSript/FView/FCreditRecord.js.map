{"version":3,"sources":["assets\\FSDK_ASS\\FSript\\FView\\FCreditRecord.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { FSocketSend } from \"../FNetWork/FSocketSend\";\r\nimport { FPanelManager } from \"../FModel/FPanelManager\";\r\nimport { FGlobal } from \"../FModel/FGlobal\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class FCreditRecord extends cc.Component {\r\n    @property(cc.Node)\r\n    mTitle_pp: cc.Node = null;\r\n    @property(cc.Node)\r\n    mTitle_gp: cc.Node = null;\r\n    @property(cc.ScrollView)\r\n    mScroll: cc.ScrollView = null;\r\n    @property(cc.Node)\r\n    mItem: cc.Node = null;\r\n    type = \"\";\r\n    onLoad() {\r\n        this.node.setContentSize(cc.winSize);\r\n    }\r\n\r\n    onEnable() {\r\n        this.mScroll.stopAutoScroll();\r\n        this.mScroll.scrollToTop(0);\r\n        cc.director.on(FEventID.CARD_RECORD, this.cardRecord, this);\r\n    }\r\n\r\n    onDisable() {\r\n        cc.director.off(FEventID.CARD_RECORD, this.cardRecord, this);\r\n    }\r\n\r\n    closePage() {\r\n        FPanelManager.close_eff(this.node, true);\r\n    }\r\n\r\n    setType(type: string) {\r\n        this.type = type;\r\n        this.mTitle_gp.active = this.mTitle_pp.active = false;\r\n        this['mTitle_' + type].active = true;\r\n        FSocketSend.C2S_info(['coins']);\r\n    }\r\n\r\n    cardRecord(data) {\r\n        if (data[this.type]) {\r\n            let list = data[this.type];\r\n            for (let i = 0; i < this.mScroll.content.childrenCount; i++) {\r\n                this.mScroll.content.children[i].active = false;\r\n            }\r\n            for (let i = 0; i < list.length; i++) {\r\n                let item: cc.Node = null;\r\n                if (i < this.mScroll.content.childrenCount) {\r\n                    item = this.mScroll.content.children[i];\r\n                    item.active = true;\r\n                }\r\n                else {\r\n                    item = cc.instantiate(this.mItem);\r\n                    item.parent = this.mScroll.content;\r\n                }\r\n                item.getChildByName('bg').active = (i + 1) % 2 != 0;\r\n                item.getChildByName('from').getComponent(cc.Label).string = list[i].from;\r\n                item.getChildByName('change').getComponent(cc.Label).string = \"$\" + list[i].change.toFixed(2);\r\n                item.getChildByName('amount').getComponent(cc.Label).string = \"$\" + list[i].amount.toFixed(2);\r\n                item.getChildByName('time').getComponent(cc.Label).string = FGlobal.getDateDay1(list[i].time);\r\n            }\r\n        }\r\n        else{\r\n            for (let i = 0; i < this.mScroll.content.childrenCount; i++) {\r\n                this.mScroll.content.children[i].active = false;\r\n            }\r\n        }\r\n        FLog.normal(\"历史记录 \", data);\r\n    }\r\n}\r\n"]}