{"version":3,"sources":["assets\\script\\common\\Actions.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/**\r\n * 简单动作集合\r\n */\r\nclass Actions {\r\n    public tweenToPos(flagNode: cc.Node, tagerPos: cc.Vec2, time: number = 0.5, cb?: () => void) {\r\n        cc.tween(flagNode)\r\n            .to(time, { position: tagerPos, scale: 0.5, opacity: 180 })\r\n            .call(() => {\r\n                if (cb) {\r\n                    cb();\r\n                }\r\n            })\r\n            .start()\r\n    }\r\n\r\n    /**\r\n     * 呼吸\r\n     * @param flagNode 播放节点\r\n     * @param shirnk 缩放最小值 默认0.9\r\n     * @param time 时间,默认0.5秒\r\n     */\r\n    public breatheEff(flagNode: cc.Node, shirnk: number = 0.9, time: number = .5) {\r\n        flagNode.stopAllActions();\r\n        cc.tween(flagNode)\r\n            .repeatForever(\r\n                cc.tween()\r\n                    .to(time, { scale: shirnk })\r\n                    .to(time, { scale: 1 })\r\n            )\r\n            .start()\r\n    }\r\n\r\n    /**\r\n     * 弹窗打开效果\r\n     * @param flagNode 播放节点\r\n     * @param cb 是否需要回调\r\n     */\r\n    public openPopup(flagNode: cc.Node, cb?: () => void): void {\r\n        flagNode.scale = 0;\r\n        let scaleTo = 1;\r\n        if (cc.winSize.width / 720 < 1) {\r\n            scaleTo = cc.winSize.width / 720;\r\n        }\r\n        cc.tween(flagNode)\r\n            .to(.2, { scale: scaleTo }, { easing: 'backOut' })\r\n            .call(() => {\r\n                if (cb) {\r\n                    cb();\r\n                }\r\n            })\r\n            .start()\r\n    }\r\n\r\n    /**\r\n     * 弹窗关闭效果\r\n     * @param flagNode 播放节点\r\n     * @param cb 是否需要回调\r\n     */\r\n    public closePopup(flagNode: cc.Node, cb?: () => void): void {\r\n        cc.tween(flagNode)\r\n            .to(.2, { scale: 0 }, { easing: 'backIn' })\r\n            .call(() => {\r\n                if (cb) {\r\n                    cb();\r\n                }\r\n            })\r\n            .start()\r\n    }\r\n\r\n    /**\r\n     * 弹出效果\r\n     * @param flagNode 播放节点\r\n     * @param time 时间 默认时间为0.3\r\n     */\r\n    public popOut(flagNode: cc.Node, time: number = .3) {\r\n        flagNode.scale = 0;\r\n        cc.tween(flagNode)\r\n            .to(time, { scale: 1 }, { easing: 'backOut' })\r\n            .start()\r\n    }\r\n\r\n    /**\r\n     * 弹回效果\r\n     * @param flagNode 播放节点\r\n     * @param time 时间 默认时间为0.3\r\n     */\r\n    public popIn(flagNode: cc.Node, time: number = .3) {\r\n        cc.tween(flagNode)\r\n            .to(time, { scale: 0 }, { easing: 'backIn' })\r\n            .start()\r\n    }\r\n\r\n    /**\r\n     * 晃动\r\n     * @param flagNode 播放节点\r\n     * @param time 时间 默认为0.2\r\n     * @param range 晃动角度 默认为10\r\n     */\r\n    public rockAction(flagNode: cc.Node, time: number = 0.02, range: number = 10) {\r\n        cc.tween(flagNode)\r\n            .by(time, { angle: range })\r\n            .by(time, { angle: -2 * range })\r\n            .by(time * 0.8, { angle: 2 * range * 0.8 })\r\n            .by(time * 0.6, { angle: -2 * range * 0.6 })\r\n            .by(time * 0.4, { angle: 2 * range * 0.4 })\r\n            .to(time * 0.2, { angle: 0 })\r\n            .start()\r\n    }\r\n\r\n    /**\r\n     * 从屏幕外进入 \r\n     * @param typeA 方向 上右下左\r\n     * @param winWidth 指定宽度\r\n     * @param winHeight 指定高度\r\n     * @param delTime 时间\r\n     */\r\n    public getMoveInScreenActive(flagNode: cc.Node, typeA: number, winWidth: number, winHeight: number, delTime: number) {\r\n        switch (typeA) {\r\n            case 0:\r\n                cc.tween(flagNode)\r\n                    .by(delTime, { position: cc.v2(0, -winHeight) })\r\n                    .start()\r\n                return cc.moveBy(delTime, 0, -winHeight);\r\n            case 1:\r\n                cc.tween(flagNode)\r\n                    .by(delTime, { position: cc.v2(-winHeight, 0) })\r\n                    .start()\r\n                return cc.moveBy(delTime, -winWidth, 0);\r\n            case 2:\r\n                cc.tween(flagNode)\r\n                    .by(delTime, { position: cc.v2(0, -winHeight) })\r\n                    .start()\r\n                return\r\n            case 3:\r\n                cc.tween(flagNode)\r\n                    .by(delTime, { position: cc.v2(winHeight, 0) })\r\n                    .start()\r\n                return\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds cion move\r\n     * @param _root 金币父节点(kong)\r\n     * @param _item 金币节点\r\n     * @param _start \r\n     * @param _end \r\n     * @param [_cb] \r\n     */\r\n    public async addCionMove(_root: cc.Node, _item: string, _start: cc.Vec2, _end: cc.Vec2, _cb?: Function, isStar: boolean = false): Promise<void> {\r\n        let _dis: number = Math.sqrt(Math.pow((_start.x - _end.x), 2) + Math.pow((_start.y - _end.y), 2));\r\n        // // 贝塞尔\r\n        // let _speed: number = _dis / 80 * 0.05;\r\n\r\n        _root.zIndex = 100;\r\n\r\n        let element;\r\n        element = await GPool.get(_item);\r\n        element.scale = 1.1;\r\n        element.position = _start;\r\n        element.opacity = 255;\r\n\r\n        let _parent = cc.callFunc(() => {\r\n            if (_cb) _cb();\r\n            if (isStar) {\r\n                GPool.get(\"star\").then((mNode: cc.Node) => {\r\n                    mNode.position = _end;\r\n                    mNode.parent = cc.find(\"Canvas/UINode/Anim\");\r\n                    mNode.getComponent(\"StarEnd\").init();\r\n                })\r\n            }\r\n            GPool.put(element);\r\n        });\r\n        let time = Math.random() * 0.8;\r\n\r\n        let x = -200 + Math.floor(Math.random() * 401);\r\n        let height = 100 + Math.floor(Math.random() * 101);\r\n        // let y = _start.y + Math.floor(Math.random() * 10);\r\n        let _action = cc.sequence(\r\n            // // 贝塞尔\r\n            // cc.spawn(\r\n            //     cc.fadeIn(0.1),\r\n            //     cc.moveBy(0.1, cc.v2(utils.randomNum(-100, 100), utils.randomNum(-100, 100))).easing(cc.easeOut(1.5)),\r\n            //     cc.scaleTo(_speed, 1)\r\n            // ),\r\n            // cc.delayTime(utils.randomNum(1, 100) / 1000 + 0.1),\r\n            // cc.bezierTo(_speed, _bezier).easing(cc.easeIn(1.5)),\r\n            cc.jumpTo(time, cc.v2(x, 0), height, 1),\r\n            cc.spawn(cc.moveTo(0.5, _end).easing(cc.easeBackIn()), cc.scaleTo(0.5, 0.8).easing(cc.easeBackIn())),\r\n\r\n            _parent,\r\n        );\r\n        element.runAction(_action);\r\n        _root.addChild(element);\r\n    }\r\n\r\n    /**\r\n     * 分数往上漂效果\r\n     * @param _root 播放节点\r\n     * @param _start 开始坐标\r\n     * @param _end 结束坐标\r\n     * @param _cb 回调\r\n     */\r\n    public addScroeMove(_root: cc.Node, _start: cc.Vec2, _end: cc.Vec2, _cb?: Function): void {\r\n        _root.zIndex = 100;\r\n        let t = cc.tween;\r\n        t(_root)\r\n            .parallel(\r\n                t().by(.2, { position: cc.v2(0, 20) }),\r\n                t().to(.1, { opacity: 1 })\r\n            )\r\n            .delayTime(.2)\r\n            .to(.2, { position: _end }, { easing: 'backIn' })\r\n            .call(() => {\r\n                if (_cb) _cb();\r\n                _root.destroy();\r\n            })\r\n            .start()\r\n    }\r\n\r\n}\r\n\r\nexport const actions = new Actions();"]}