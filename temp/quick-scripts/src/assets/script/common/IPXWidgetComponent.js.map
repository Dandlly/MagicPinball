{"version":3,"sources":["assets\\script\\common\\IPXWidgetComponent.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/**\r\n * IPXWidget适配器\r\n * 适用于非16:9屏幕贴边UI\r\n * @author yxx0\r\n */\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class IPXWidgetComponent extends cc.Component {\r\n\r\n    @property(cc.Boolean)\r\n    public isPortait: boolean = true;\r\n\r\n    @property({ type: cc.Float, tooltip: \"需要勾选对应widget组件对齐的方向方可生效\" })\r\n    public left: number = 0;\r\n\r\n    @property({ type: cc.Float, tooltip: \"需要勾选对应widget组件对齐的方向方可生效\" })\r\n    public right: number = 0;\r\n\r\n    @property({ type: cc.Float, tooltip: \"需要勾选对应widget组件对齐的方向方可生效\" })\r\n    public top: number = 0;\r\n\r\n    @property({ type: cc.Float, tooltip: \"需要勾选对应widget组件对齐的方向方可生效\" })\r\n    public bottom: number = 0;\r\n\r\n    private widget: cc.Widget = null;\r\n\r\n    protected onLoad(): void {\r\n        this.widget = this.node.getComponent(cc.Widget);\r\n\r\n        this.checkWidgetStatus();\r\n    }\r\n\r\n    /**\r\n     * 检查widget状态\r\n     */\r\n    protected checkWidgetStatus(): void {\r\n        if (!this.widget) return console.error('节点:', this.node.name, 'WidgetComponent 未绑定widget组件');\r\n\r\n        const pos = cc.winSize;\r\n\r\n        if (this.isPortait) {\r\n            // 屏幕比不为16:9 (竖屏)\r\n            if (!(Math.ceil(pos.height * 9 / 16) > pos.width - 2 && Math.ceil(pos.height * 9 / 16) < pos.width + 2)) {\r\n                this.setWidgetValue();\r\n            }\r\n        } else {\r\n            // 屏幕比不为16:9 (横屏)\r\n            if (!(Math.ceil(pos.width * 9 / 16) > pos.height - 2 && Math.ceil(pos.width * 9 / 16) < pos.height + 2)) {\r\n                this.setWidgetValue();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 设置widget数值\r\n     */\r\n    private setWidgetValue(): void {\r\n        if (cc.winSize.width / cc.winSize.height <= 0.5625) {\r\n            this.top += 65;\r\n        }\r\n        if (this.widget.isAlignBottom) this.widget.bottom = this.bottom;\r\n        if (this.widget.isAlignTop) this.widget.top = this.top;\r\n        if (this.widget.isAlignLeft) this.widget.left = this.left;\r\n        if (this.widget.isAlignRight) this.widget.right = this.right;\r\n    }\r\n}\r\n"]}