{"version":3,"sources":["assets\\script\\popup\\GameOver.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6CAA4C;AAC5C,uCAAsC;AACtC,2CAA0C;AAC1C,2DAAoE;AACpE,2DAAqD;AAE/C,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAC5C;;;GAGG;AAEH;IAAsC,4BAAY;IADlD;QAAA,qEAgEC;QA7DG,oBAAc,GAAY,IAAI,CAAC,CAAA,KAAK;QAGpC,iBAAW,GAAY,IAAI,CAAC,CAAA,OAAO;QAE3B,cAAQ,GAAY,KAAK,CAAC;;IAwDtC,CAAC;IAtDG,2BAAQ,GAAR;QACI,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,6BAAY,CAAC,eAAe,EAAE;YAC/B,6BAAY,CAAC,eAAe,GAAG,IAAI,CAAC;YACpC,+BAA+B;SAClC;QAED,KAAK;QACL,iBAAO,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAExC,IAAI,WAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,EAAE;YACjC,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,KAAK,CAAC;YACnC,iBAAO,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SACxC;IACL,CAAC;IAED;;OAEG;IACI,mCAAgB,GAAvB;QAAA,iBAmBC;QAlBG,IAAI,IAAI,CAAC,QAAQ;YAAE,OAAO;QAC1B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAErB,eAAM,CAAC,IAAI,CAAC,2BAAU,CAAC,iBAAiB,EAAE,0BAAS,CAAC,MAAM,CAAC,CAAC;QAC5D,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,WAAI,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE;YAChD,WAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,6BAAY,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;YAC/B,eAAM,CAAC,IAAI,CAAC,2BAAU,CAAC,UAAU,CAAC,CAAC;YACnC,OAAO;SACV;QAED,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE;YACrB,WAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,CAAC,UAAU,CAAC;gBACZ,6BAAY,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;gBAC/B,eAAM,CAAC,IAAI,CAAC,2BAAU,CAAC,UAAU,CAAC,CAAC;YACvC,CAAC,EAAE,KAAI,CAAC,CAAC;QACb,CAAC,EAAE,IAAI,CAAC,CAAA;IACZ,CAAC;IAED;;OAEG;IACI,gCAAa,GAApB;QACI,IAAI,IAAI,CAAC,QAAQ;YAAE,OAAO;QAC1B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAErB,eAAM,CAAC,IAAI,CAAC,2BAAU,CAAC,iBAAiB,EAAE,0BAAS,CAAC,MAAM,CAAC,CAAC;QAC5D,6BAAY,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QAChC,eAAM,CAAC,IAAI,CAAC,2BAAU,CAAC,UAAU,CAAC,CAAC;QACnC,IAAI,GAAG,GAAG,WAAI,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC;QACvC,WAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;IAClC,CAAC;IA3DD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;oDACa;IAG/B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACU;IALX,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA+D5B;IAAD,eAAC;CA/DD,AA+DC,CA/DqC,EAAE,CAAC,SAAS,GA+DjD;kBA/DoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import { actions } from \"../common/Actions\";\r\nimport { user } from \"../common/User\";\r\nimport { events } from \"../common/Events\";\r\nimport { GameEvents, GameConstant } from \"../common/EventConstants\";\r\nimport { AudioName } from \"../common/AudioConstands\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n/**\r\n * 作者：Dandlly\r\n * 游戏结算弹窗\r\n */\r\n@ccclass\r\nexport default class GameOver extends cc.Component {\r\n    @property(cc.Node)\r\n    resurgenceNode: cc.Node = null;// 复活\r\n\r\n    @property(cc.Node)\r\n    restartNode: cc.Node = null;// 重新开始\r\n\r\n    private isDoudle: boolean = false;\r\n\r\n    onEnable() {\r\n        this.isDoudle = false;\r\n        if (!GameConstant.resurgenceVideo) {\r\n            GameConstant.resurgenceVideo = true;\r\n            // FSDK.preloadVideo(\"revive\");\r\n        }\r\n\r\n        // 呼吸\r\n        actions.breatheEff(this.resurgenceNode);\r\n\r\n        if (user.getCurrnetReviveNum() <= 0) {\r\n            this.resurgenceNode.active = false;\r\n            actions.breatheEff(this.restartNode);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 复活\r\n     */\r\n    public resurgenceHandle(): void {\r\n        if (this.isDoudle) return;\r\n        this.isDoudle = true;\r\n\r\n        events.emit(GameEvents.PLAY_SOUND_EFFECT, AudioName.BUTTON);\r\n        if (!cc.sys.isNative || user.getLumpData().isDebug) {\r\n            user.setCurrnetReviveNum();\r\n            GameConstant.game.resurgence();\r\n            events.emit(GameEvents.HIDE_POPUP);\r\n            return;\r\n        }\r\n\r\n        FSDK.openVideo(\"revive\", () => {\r\n            user.setCurrnetReviveNum();\r\n            FSDK.openInters(() => {\r\n                GameConstant.game.resurgence();\r\n                events.emit(GameEvents.HIDE_POPUP);\r\n            }, this);\r\n        }, this)\r\n    }\r\n\r\n    /**\r\n     * 重新开始\r\n     */\r\n    public restartHandle(): void {\r\n        if (this.isDoudle) return;\r\n        this.isDoudle = true;\r\n\r\n        events.emit(GameEvents.PLAY_SOUND_EFFECT, AudioName.BUTTON);\r\n        GameConstant.game.restartInit();\r\n        events.emit(GameEvents.HIDE_POPUP);\r\n        let num = user.getLumpData().reviveNum;\r\n        user.setCurrnetReviveNum(num);\r\n    }\r\n\r\n}\r\n"]}