{"version":3,"sources":["assets\\FSDK_ASS\\FSript\\FView\\FInvityTaskItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { FGlobal } from \"../FModel/FGlobal\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class FInvityTaskItem extends cc.Component {\r\n    @property(cc.Label)\r\n    mAmount: cc.Label = null;\r\n    @property(cc.Label)\r\n    mTitle: cc.Label = null;\r\n    @property(cc.Label)\r\n    mPro: cc.Label = null;\r\n    @property(cc.Sprite)\r\n    sPro: cc.Sprite = null;\r\n    @property(cc.Button)\r\n    mBtnTrans: cc.Button = null;\r\n    @property(cc.Label)\r\n    mStaus: cc.Label = null;\r\n    pos = 0;\r\n    data = null;\r\n    parent: cc.Node = null;\r\n    onEnable() {\r\n        cc.director.on(FEventID.S2C_trans_history, this.setHistory, this);\r\n    }\r\n\r\n    onDisable() {\r\n        cc.director.off(FEventID.S2C_trans_history, this.setHistory, this);\r\n    }\r\n\r\n    setData(pos, data, parent) {\r\n        this.pos = pos;\r\n        this.data = data;\r\n        this.parent = parent;\r\n        this.mAmount.string = `$${data.amount}`;\r\n        this.mTitle.string = `invite ${data.count} friends`;\r\n        this.mPro.string = `${FGlobal.USER_INFO.invite_count}/${data.count}`;\r\n        this.sPro.fillRange = FGlobal.USER_INFO.invite_count / data.count;\r\n        this.mBtnTrans.interactable = this.sPro.fillRange >= 1;\r\n    }\r\n\r\n    getTrans() {\r\n        FSDK.showTransPage(this.parent, this.data, () => {\r\n            FGlobal.invite_task.push(this.data.id);\r\n            this.setStatus({status:0});\r\n        })\r\n    }\r\n\r\n    setHistory(data) {\r\n        if (!this.data) return;\r\n        if (data && data.data.records.length) {\r\n            let type = data.data.type;\r\n            data = data.data.records;\r\n            if (type == 'invite') {\r\n                for (let i = 0; i < data.length; i++) {\r\n                    if (this.data.id == data[i].custom_id) {\r\n                        this.setStatus(data[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.initStatus();\r\n        }\r\n    }\r\n\r\n    setStatus(data) {\r\n        let stutas = 'Processing';\r\n        let color = 'FF8F00';\r\n        switch (data.status) {\r\n            case 0:\r\n                stutas = 'Processing';\r\n                color = 'FF8F00'\r\n                break;\r\n            case 1:\r\n                stutas = 'Finish';\r\n                color = '15C323'\r\n                break;\r\n            case 2:\r\n                stutas = 'In Review';\r\n                color = 'FF8F00'\r\n                break;\r\n            case -1:\r\n                stutas = 'Refuse';\r\n                color = 'D32424'\r\n                break;\r\n            case -2:\r\n                stutas = 'GetFail';\r\n                color = 'D32424'\r\n                break;\r\n        }\r\n        this.mBtnTrans.node.active = false;\r\n        this.mStaus.string = stutas;\r\n        this.mStaus.node.color = new cc.Color().fromHEX(color);\r\n    }\r\n\r\n    initStatus() {\r\n        if (!this.data) return;\r\n        let data = FGlobal.invite_task;\r\n        for (let i = 0; i < data.length; i++) {\r\n            if (data[i] == this.data.id) {\r\n                this.mStaus.node.active = true;\r\n                this.setStatus({ status: 0 });\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n"]}