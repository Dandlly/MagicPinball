{"version":3,"sources":["assets\\script\\loading\\Loading.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,2DAAoE;AACpE,yDAAoD;AACpD,uCAAsC;AACtC,6CAA4C;AAE5C,wCAAmC;AACnC,0CAAqC;AACrC,2CAA0C;AAC1C,2DAAqD;AAE/C,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAC5C;;GAEG;AAEH;IAAqC,2BAAY;IADjD;QAAA,qEAqOC;QAlOG,UAAI,GAAY,IAAI,CAAC;QAErB,UAAI,GAAY,IAAI,CAAC;QAErB,QAAE,GAAY,IAAI,CAAC;QAEnB,cAAQ,GAAY,IAAI,CAAC;QAGzB,kBAAY,GAAa,IAAI,CAAC;QAE9B,iBAAW,GAAmB,IAAI,CAAA;QAGlC,cAAQ,GAAa,IAAI,CAAC;QAG1B,UAAI,GAAmB,IAAI,CAAC;QAG5B,iBAAW,GAAY,IAAI,CAAC;QAEpB,kBAAY,GAAW,CAAC,CAAC;QACzB,cAAQ,GAAY,KAAK,CAAC;;IA2MtC,CAAC;IAzMG,wBAAM,GAAN;QACI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,uBAAuB,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;QAChE,6BAAY,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,wBAAc,CAAC,CAAC;QAC3D,iBAAO,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACtC,CAAC;IAED,uBAAK,GAAL;QACI,IAAI;YACA,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;QAAC,OAAO,KAAK,EAAE;YACZ,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACtB;IACL,CAAC;IAED,wBAAM,GAAN;QACI,cAAc;QACd,IAAI,IAAI,CAAC,YAAY,GAAG,CAAC,EAAE;YACvB,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,IAAI,CAAC,YAAY,KAAK,CAAC,EAAE;gBACzB,IAAI,CAAC,IAAI,EAAE,CAAC;aACf;SACJ;QAED,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjD,IAAI;gBACA,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACtB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACzB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,kBAAQ,CAAC,CAAC,IAAI,EAAE,CAAC;gBACxC,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,mBAAS,CAAC,CAAC,IAAI,EAAE,CAAC;gBAChD,IAAI,WAAI,CAAC,YAAY,EAAE,IAAI,WAAI,CAAC,UAAU,CAAC,UAAU,IAAI,CAAC,IAAI,WAAI,CAAC,UAAU,CAAC,SAAS,IAAI,CAAC,EAAE;oBAC1F,WAAI,CAAC,YAAY,EAAE,CAAC;oBACpB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;oBACxB,IAAI,CAAC,UAAU,EAAE,CAAC;oBAClB,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;iBACxC;qBAAM;oBACH,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;iBAC3B;aACJ;YAAC,OAAO,KAAK,EAAE;gBACZ,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;aACtB;SAEJ;QAED,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,CAAC;YAAE,OAAO;QAC3C,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,IAAI,CAAC;QAClC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IACjF,CAAC;IAGD;;OAEG;IACW,sBAAI,GAAlB;uCAAsB,OAAO;;;gBACzB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBAEnB,UAAU;gBACV,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;oBAChB,OAAO;oBACP,KAAI,CAAC,QAAQ,EAAE,CAAC;gBACpB,CAAC,CAAC,CAAC,IAAI,CAAC;oBACJ,KAAI,CAAC,cAAc,EAAE,CAAC;gBAC1B,CAAC,CAAC,CAAC,IAAI,CAAC;oBACJ,OAAO;oBACP,KAAI,CAAC,OAAO,EAAE,CAAC;gBACnB,CAAC,CAAC,CAAA;;;;KACL;IAED;;;QAGI;IACI,yBAAO,GAAf;QAAA,iBAkCC;QAjCG,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,aAAa;YACb,0BAA0B;YAC1B,wDAAwD;YACxD,+CAA+C;YAC/C,uBAAuB;YACvB,sBAAsB;YACtB,IAAI,IAAI,GAAG;gBACP,UAAU,EAAE,yBAAyB;gBACrC,QAAQ,EAAE,yCAAyC;gBACnD,EAAE,EAAE,sBAAsB;gBAC1B,OAAO,EAAE,KAAK;gBACd,mEAAmE;gBACnE,QAAQ,EAAE,iBAAiB;gBAC3B,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,KAAI,CAAC,IAAI;aACrB,CAAC;YACF,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,UAAU,EAAE;gBACpD,IAAI,CAAC,UAAU,GAAG,4BAA4B,CAAC,CAAM,wBAAwB;gBAC7E,IAAI,CAAC,QAAQ,GAAG,4CAA4C,CAAC,CAAM,2BAA2B;gBAC9F,IAAI,CAAC,EAAE,GAAG,sBAAsB,CAAC;gBACjC,IAAI,CAAC,IAAI,GAAG,YAAY,CAAA;aAC3B;YACD,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;gBACjB,KAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,cAAY,IAAI,CAAC,UAAU,EAAE,CAAC,GAAK,CAAC;aAC9D;YACD,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,UAAC,KAAK;gBAClB,WAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBACxB,WAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC;gBAC9B,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;gBACzB,OAAO,EAAE,CAAC;YACd,CAAC,EAAE,KAAI,CAAC,CAAC;QACb,CAAC,CAAC,CAAA;IACN,CAAC;IAGD;;OAEG;IACK,0BAAQ,GAAhB;QAAA,iBA0DC;QAzDG,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,OAAO;YACP,WAAI,CAAC,IAAI,EAAE,CAAC;YAEZ,SAAS;YACT,WAAI,CAAC,SAAS,GAAG,WAAI,CAAC,UAAU,CAAC,SAAS,CAAC;YAC3C,WAAI,CAAC,UAAU,GAAG,WAAI,CAAC,UAAU,CAAC,SAAS,CAAC;YAC5C,WAAI,CAAC,MAAM,GAAG,WAAI,CAAC,UAAU,CAAC,MAAM,CAAC;YAErC,SAAS;YACT,WAAI,CAAC,WAAW,CAAC,WAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAEpD,IAAI,CAAC,OAAO,CAAC,WAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;YAE9B,WAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YAEvB,IAAI,WAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,EAAE;gBAChC,WAAI,CAAC,kBAAkB,CAAC,WAAI,CAAC,WAAW,EAAE,CAAC,eAAe,CAAC,CAAC;aAC/D;YAED,SAAS;YACT,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,WAAI,CAAC,gBAAgB,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;gBACjE,IAAI,WAAI,CAAC,gBAAgB,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,KAAK,IAAI,EAAE;oBAC9C,WAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;oBAC3B,MAAM;iBACT;qBAAM;oBACH,WAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;iBAC/B;aACJ;YAGD,OAAO;YACP,IAAI,WAAI,CAAC,UAAU,CAAC,SAAS,EAAE;gBAC3B,WAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBACvB,WAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAA,OAAO;gBAChC,WAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAA,UAAU;gBACnC,WAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAA,OAAO;gBACzB,WAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;gBACrB,WAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;aAC3B;YAED,SAAS;YACT,IAAI,CAAC,gBAAgB,CAAC;gBAClB,WAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBACvB,WAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBACzB,WAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;gBACzB,WAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;gBACrB,WAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBAClB,WAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;gBACxB,WAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACjB,CAAC,EAAE,KAAI,CAAC,CAAA;YAGR,WAAI,CAAC,IAAI,EAAE,CAAC;YACZ,WAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACb,OAAO,EAAE,CAAC;QACd,CAAC,CAAC,CAAA;IACN,CAAC;IAED;;OAEG;IACK,gCAAc,GAAtB;QACI,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,KAAK,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,aAAa,EAAE,CAAC,EAAE,aAAa,EAAE,CAAC,EAAE,UAAU,EAAE,EAAE,EAAE,UAAU,EAAE,EAAE,EAAE,UAAU,EAAE,EAAE,EAAE,UAAU,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,aAAa,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC,CAAA;YAEnO,IAAI,CAAC,WAAW,CAAC;gBACb,eAAM,CAAC,IAAI,CAAC,2BAAU,CAAC,iBAAiB,EAAE,0BAAS,CAAC,MAAM,CAAC,CAAC;YAChE,CAAC,CAAC,CAAA;YACF,OAAO,EAAE,CAAC;QACd,CAAC,CAAC,CAAA;IACN,CAAC;IAED;;OAEG;IACK,yBAAO,GAAf;QAAA,iBAWC;QAVG,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,oDAAoD;YACpD,IAAI,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC;YAC9C,QAAQ;YACR,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;YACvB,OAAO,CAAC,kBAAkB,GAAG,IAAI,CAAC;YAClC,sDAAsD;YACtD,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,OAAO,EAAE,CAAC;QACd,CAAC,CAAC,CAAA;IACN,CAAC;IAhOD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;yCACG;IAErB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;yCACG;IAErB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;uCACC;IAEnB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;6CACO;IAGzB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;iDACW;IAE9B;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;gDACS;IAGlC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;6CACO;IAG1B;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;yCACG;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACU;IAtBX,OAAO;QAD3B,OAAO;OACa,OAAO,CAoO3B;IAAD,cAAC;CApOD,AAoOC,CApOoC,EAAE,CAAC,SAAS,GAoOhD;kBApOoB,OAAO","file":"","sourceRoot":"/","sourcesContent":["import { GameConstant, GameEvents } from \"../common/EventConstants\";\r\nimport GameController from \"../game/GameController\";\r\nimport { user } from \"../common/User\";\r\nimport { actions } from \"../common/Actions\";\r\nimport { CacheFileNames, CacheKey, CACHE_CONFIG_PATH, cache } from \"../common/Cache\";\r\nimport FSidebar from \"../FSidebar\";\r\nimport FHideNode from \"../FHideNode\";\r\nimport { events } from \"../common/Events\";\r\nimport { AudioName } from \"../common/AudioConstands\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n/**\r\n * 作者:Dandlly\r\n */\r\n@ccclass\r\nexport default class Loading extends cc.Component {\r\n    @property(cc.Node)\r\n    game: cc.Node = null;\r\n    @property(cc.Node)\r\n    main: cc.Node = null;\r\n    @property(cc.Node)\r\n    ui: cc.Node = null;\r\n    @property(cc.Node)\r\n    logoNode: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    loadingLabel: cc.Label = null;\r\n    @property(cc.ProgressBar)\r\n    progressBar: cc.ProgressBar = null\r\n\r\n    @property(cc.Label)\r\n    verLabel: cc.Label = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    icon: cc.SpriteFrame = null;\r\n\r\n    @property(cc.Node)\r\n    isBreakNode: cc.Node = null;\r\n\r\n    private _updateTotal: number = 0;\r\n    private _isReady: boolean = false;\r\n\r\n    onLoad() {\r\n        FLog.normal(this.node.parent.getComponentsInChildren(cc.Label));\r\n        GameConstant.game = this.game.getComponent(GameController);\r\n        actions.breatheEff(this.logoNode);\r\n    }\r\n\r\n    start() {\r\n        try {\r\n            FSDK.initSZSDK();\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    update() {\r\n        // 加载页过三帧再执行逻辑\r\n        if (this._updateTotal < 3) {\r\n            this._updateTotal++;\r\n            if (this._updateTotal === 3) {\r\n                this.init();\r\n            }\r\n        }\r\n\r\n        if (this.progressBar.progress >= 1 && this._isReady) {\r\n            try {\r\n                this._isReady = false;\r\n                this.node.active = false;\r\n                this.node.getComponent(FSidebar).init();\r\n                this.isBreakNode.getComponent(FHideNode).init();\r\n                if (user.getIsLoading() && user.serverData.login_days == 1 && user.serverData.login_cnt == 1) {\r\n                    user.setIsLoading();\r\n                    this.game.active = true;\r\n                    FSDK.openBanner();\r\n                    FSDK.umengEvent(\"Game_Loading\", \"1\");\r\n                } else {\r\n                    this.main.active = true;\r\n                }\r\n            } catch (error) {\r\n                FLog.normal(error);\r\n            }\r\n\r\n        }\r\n\r\n        if (this.progressBar.progress >= 1) return;\r\n        this.progressBar.progress += 0.01;\r\n        this.loadingLabel.string = Math.floor(this.progressBar.progress * 100) + '%';\r\n    }\r\n\r\n\r\n    /**\r\n     * 初始化\r\n     */\r\n    private async init(): Promise<void> {\r\n        FSDK.setLog(false);\r\n\r\n        // 初始化SKD \r\n        this.initSDK().then(() => {\r\n            // 用户数据\r\n            this.initUser();\r\n        }).then(() => {\r\n            this.initGameStauts();\r\n        }).then(() => {\r\n            // 开始游戏\r\n            this.runGame();\r\n        })\r\n    }\r\n\r\n    /**\r\n      * 初始化SDK\r\n      * (占据进度条百分之十进度)\r\n      */\r\n    private initSDK(): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            // 代号 acnball\r\n            // 包名 com.toponegames.ball\r\n            // 正服链接 wss://api.elswz.toponegames.cn:20212/?pg=acnball\r\n            // 测服链接 wss://test.wps168.com:20212/?pg=acnball\r\n            // key jCI61OzA3oAAbe3i\r\n            // iv H6MNpakNEuD9LjNm\r\n            let data = {\r\n                ip_release: \"wss://iusball.cc:20212/\",\t\t\t\t\t\t//socket正服地址 wss://xxxxx\r\n                ip_debug: \"wss://test.wps168.com:20212/?pg=iusball\",\t\t\t\t\t\t\t//socket测服地址 wss://xxxxx\t\t\t\r\n                pg: \"com.super.iuspinball\",\t\t\t\t\t\t\t\t\t\t//包名com.xxx.xxx\r\n                isDebug: false,\t\t\t\t\t\t//是否连接测服\r\n                // test_aid: \"2392835726d32492\",\t\t\t\t\t\t\t//唯一id（测试用） 如果是在手机端，sdk会自己获取\r\n                test_aid: \"xvxcvsdfsfsefsf\",\t\t\t\t\t\t\t//唯一id（测试用） 如果是在手机端，sdk会自己获取\r\n                code: \"iusball\",\t\t\t\t\t\t\t\t\t\t//游戏代号\r\n                tos_img: this.icon\r\n            };\r\n            if (!cc.sys.isNative || cc.sys.os == cc.sys.OS_ANDROID) {\r\n                data.ip_release = \"wss://ausballpro.cc:20212/\";\t\t\t\t\t\t//socket正服地址 wss://xxxxx\r\n                data.ip_debug = \"wss://test.wps168.com:20212/?pg=ausballpro\";\t\t\t\t\t\t//socket测服地址 wss://xxxxx\t\t\t\r\n                data.pg = \"com.super.auspinball\";\r\n                data.code = \"ausballpro\"\r\n            }\r\n            if (cc.sys.isNative) {\r\n                this.verLabel.string = `release v${FSDK.getVerInfo().ver}`;\r\n            }\r\n            FSDK.init(data, (_data) => {\r\n                user.serverData = _data;\r\n                user.serverData.isFlag = true;\r\n                FLog.normal('数据', _data);\r\n                resolve();\r\n            }, this);\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 初始化用户信息\r\n     */\r\n    private initUser(): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            // 读取数据\r\n            user.load();\r\n\r\n            // 与服务器校正\r\n            user.firstGold = user.serverData.credit_gp;\r\n            user.secondGold = user.serverData.credit_pp;\r\n            user.credit = user.serverData.credit;\r\n\r\n            // 读取游戏配置\r\n            user.setLumpData(user.serverData.ALL_CONF.gameData);\r\n\r\n            FSDK.setTask(user.getLevel());\r\n\r\n            user.setCurrentProp(0);\r\n\r\n            if (user.getRainProbability() == 0) {\r\n                user.setRainProbability(user.getLumpData().rainProbability);\r\n            }\r\n\r\n            // 红包配置判断\r\n            for (let index = 0; index < user.getRecordBarrier().length; index++) {\r\n                if (user.getRecordBarrier()[index].name === \"bx\") {\r\n                    user.setIsRedAndCost(true);\r\n                    break;\r\n                } else {\r\n                    user.setIsRedAndCost(false);\r\n                }\r\n            }\r\n\r\n\r\n            // 数据隔天\r\n            if (user.serverData.isNextDay) {\r\n                user.setAwardNumber(0);\r\n                user.setIsGetGift(false);// 获取红包\r\n                user.setCollectCoins2(0);//金币第二阶段清0\r\n                user.setExpDay(0);// 每日经验\r\n                user.setSpinCount(0);\r\n                user.setRainAwardNum(0);\r\n            }\r\n\r\n            // 数据隔天监听\r\n            FSDK.setNextDayListen(() => {\r\n                user.setAwardNumber(0);\r\n                user.setIsGetGift(false);\r\n                user.setCollectCoins2(0);\r\n                user.setSpinCount(0);\r\n                user.setExpDay(0);\r\n                user.setRainAwardNum(0);\r\n                user.save(1);\r\n            }, this)\r\n\r\n\r\n            user.save();\r\n            user.save(1);\r\n            resolve();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 初始化游戏状态（这里用来初始化对象池）\r\n     */\r\n    private initGameStauts(): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            GPool.init({ InitEach: { \"ball\": 50, \"buffAddBall\": 2, \"buffBigBall\": 2, \"polygon1\": 10, \"polygon2\": 10, \"polygon3\": 10, \"polygon4\": 10, \"pp\": 5, \"gp\": 5, \"raindowCion\": 100, \"credit\": 5, \"star\": 1, \"bx\": 5, \"synthetic\": 2 } })\r\n\r\n            FSDK.setBtnSound(() => {\r\n                events.emit(GameEvents.PLAY_SOUND_EFFECT, AudioName.BUTTON);\r\n            })\r\n            resolve();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 进入游戏\r\n     */\r\n    private runGame(): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            // cc.director.getCollisionManager().enabled = true;\r\n            var manager = cc.director.getPhysicsManager();\r\n            //启用物理世界\r\n            manager.enabled = true;\r\n            manager.enabledAccumulator = true;\r\n            // cc.director.getPhysicsManager().debugDrawFlags = 1;\r\n            this._isReady = true;\r\n            resolve();\r\n        })\r\n    }\r\n\r\n}\r\n"]}