{"version":3,"sources":["assets\\FSDK_ASS\\FSript\\FView\\FTransItem.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,yDAAwD;AACxD,6CAA4C;AAEtC,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAG5C;IAAgC,8BAAY;IAD5C;QAAA,qEA0HC;QAvHG,eAAS,GAAc,IAAI,CAAC;QAE5B,WAAK,GAAa,IAAI,CAAC;QAEvB,aAAO,GAAa,IAAI,CAAC;QAEzB,iBAAW,GAAqB,EAAE,CAAC;QAEnC,aAAO,GAAa,IAAI,CAAC;QAEzB,WAAK,GAAa,IAAI,CAAC;QACvB,UAAI,GAAG,IAAI,CAAC;QACZ,cAAQ,GAAG,IAAI,CAAC;QAChB,iBAAW,GAAe,IAAI,CAAC;;IA0GnC,CAAC;IAzGG,2BAAM,GAAN;QACI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,iBAAiB,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;IAChF,CAAC;IAED,yCAAoB,GAApB,UAAqB,GAAG;QACpB,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,MAAM,EAAE;YACrC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC9C,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE;oBAC/C,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;iBACvC;aACJ;SACJ;IACL,CAAC;IAED,4BAAO,GAAP,UAAQ,IAAI,EAAE,SAAS,EAAC,IAAS;QAAT,qBAAA,EAAA,WAAS;QAC7B,IAAG,IAAI,EAAC;YACJ,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;SACjC;QACD,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;QAC7B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;QACxC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;SACtC;QACD,IAAI,CAAC,IAAI,CAAC,KAAK,GAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;QACpC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;QACvC,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;QACtE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;QAC7D,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE;YACvD,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SAC3B;QACD,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,UAAU,EAAE;YAC3D,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SAC3B;QAED,IAAI,iBAAO,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE;YACxC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,iBAAO,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACjE,IAAI,iBAAO,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE;oBACxD,IAAI,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;iBACjC;aACJ;SACJ;IACL,CAAC;IAED,UAAU;IACV,gCAAW,GAAX;QACI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChE,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;gBAC1D,OAAO,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;aAChD;SACJ;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,0BAAK,GAAL;QAAA,iBAkBC;QAjBG,IAAI,CAAC,iBAAO,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,EAAE;YACtC,iBAAO,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,GAAG,EAAE,CAAC;SAC5C;QACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,iBAAO,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACjE,IAAI,iBAAO,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE;gBACxD,IAAI,CAAC,SAAS,CAAC,6BAA6B,CAAC,CAAC;gBAC9C,OAAO;aACV;SACJ;QACD,6BAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC9C,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC;YACrB,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,EAAE;gBAE1C,iBAAO,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,KAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACvD,KAAI,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;YAClC,CAAC;SACJ,CAAC,CAAA;IACN,CAAC;IAED,8BAAS,GAAT,UAAU,IAAI;QACV,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;QACpB,IAAI,MAAM,GAAG,YAAY,CAAC;QAC1B,IAAI,KAAK,GAAG,QAAQ,CAAC;QACrB,QAAQ,IAAI,CAAC,MAAM,EAAE;YACjB,KAAK,CAAC;gBACF,MAAM,GAAG,YAAY,CAAC;gBACtB,KAAK,GAAG,QAAQ,CAAA;gBAChB,MAAM;YACV,KAAK,CAAC;gBACF,MAAM,GAAG,QAAQ,CAAC;gBAClB,KAAK,GAAG,QAAQ,CAAA;gBAChB,MAAM;YACV,KAAK,CAAC;gBACF,MAAM,GAAG,WAAW,CAAC;gBACrB,KAAK,GAAG,QAAQ,CAAA;gBAChB,MAAM;YACV,KAAK,CAAC,CAAC;gBACH,MAAM,GAAG,QAAQ,CAAC;gBAClB,KAAK,GAAG,QAAQ,CAAA;gBAChB,MAAM;YACV,KAAK,CAAC,CAAC;gBACH,MAAM,GAAG,SAAS,CAAC;gBACnB,KAAK,GAAG,QAAQ,CAAA;gBAChB,MAAM;SACb;QACD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;QAC7B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,EAAE,CAAC,KAAK,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAC5D,CAAC;IAtHD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;iDACQ;IAE5B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;6CACI;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;+CACM;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;mDACU;IAEnC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;+CACM;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;6CACG;IAZd,UAAU;QADtB,OAAO;OACK,UAAU,CAyHtB;IAAD,iBAAC;CAzHD,AAyHC,CAzH+B,EAAE,CAAC,SAAS,GAyH3C;AAzHY,gCAAU","file":"","sourceRoot":"/","sourcesContent":["import { FTransInfo } from \"./FTransInfo\";\r\nimport { FPanelManager } from \"../FModel/FPanelManager\";\r\nimport { FGlobal } from \"../FModel/FGlobal\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class FTransItem extends cc.Component {\r\n    @property(cc.Sprite)\r\n    mCardIcon: cc.Sprite = null;\r\n    @property(cc.Label)\r\n    mCoin: cc.Label = null;\r\n    @property(cc.Label)\r\n    mStatus: cc.Label = null;\r\n    @property(cc.SpriteFrame)\r\n    mCardIconSp: cc.SpriteFrame[] = [];\r\n    @property(cc.Label)\r\n    mAmount: cc.Label = null;\r\n    @property(cc.Sprite)\r\n    mIcon:cc.Sprite = null;\r\n    data = null;\r\n    confData = null;\r\n    mFTransInfo: FTransInfo = null;\r\n    onLoad() {\r\n        cc.director.on(FEventID.S2C_trans_history, this.on_S2C_trans_history, this);\r\n    }\r\n\r\n    on_S2C_trans_history(msg) {\r\n        if (!msg.err && msg.data.type == 'list') {\r\n            for (let i = 0; i < msg.data.records.length; i++) {\r\n                if (msg.data.records[i].custom_id == this.data.id) {\r\n                    this.setStatus(msg.data.records[i]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setData(data, transInfo,icon=null) {\r\n        if(icon){\r\n            this.mIcon.spriteFrame = icon;\r\n        }\r\n        this.mFTransInfo = transInfo;\r\n        this.data = data;\r\n        this.mAmount.string = \"$\" + data.amount;\r\n        if (!this.confData) {\r\n            this.confData = this.getConfInfo();\r\n        }\r\n        this.data.count =this.confData.coin;\r\n        this.mCoin.string = this.confData.coin;\r\n        this.mCardIcon.spriteFrame = this.mCardIconSp[this.confData.type - 1];\r\n        this.data['icon'] = this.mCardIconSp[this.confData.type - 1];\r\n        if (this.confData.type == 1 && cc.sys.os == cc.sys.OS_IOS) {\r\n            this.node.parent = null;\r\n        }\r\n        if (this.confData.type == 2 && cc.sys.os == cc.sys.OS_ANDROID) {\r\n            this.node.parent = null;\r\n        }\r\n\r\n        if (FGlobal.USER_INFO.trans_record['list']) {\r\n            for (let i = 0; i < FGlobal.USER_INFO.trans_record.list.length; i++) {\r\n                if (FGlobal.USER_INFO.trans_record.list[i] == this.data.id) {\r\n                    this.setStatus({ status: 0 });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    //返回配置表的信息\r\n    getConfInfo() {\r\n        for (let i = 0; i < FConfig.FSDK_CONF.LIST_CONF.target.length; i++) {\r\n            if (this.data.id == FConfig.FSDK_CONF.LIST_CONF.target[i].id) {\r\n                return FConfig.FSDK_CONF.LIST_CONF.target[i];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    click() {\r\n        if (!FGlobal.USER_INFO.trans_record.list) {\r\n            FGlobal.USER_INFO.trans_record.list = [];\r\n        }\r\n        for (let i = 0; i < FGlobal.USER_INFO.trans_record.list.length; i++) {\r\n            if (FGlobal.USER_INFO.trans_record.list[i] == this.data.id) {\r\n                FSDK.showToast('The order has been received');\r\n                return;\r\n            }\r\n        }\r\n        FPanelManager.open_eff(this.mFTransInfo.node);\r\n        this.mFTransInfo.setData({\r\n            data: this.data, confData: this.confData, cb: () => {\r\n\r\n                FGlobal.USER_INFO.trans_record.list.push(this.data.id);\r\n                this.setStatus({ status: 0 });\r\n            }\r\n        })\r\n    }\r\n\r\n    setStatus(data) {\r\n        FLog.normal(\"有没有进来\")\r\n        let stutas = 'Processing';\r\n        let color = 'FF8F00';\r\n        switch (data.status) {\r\n            case 0:\r\n                stutas = 'Processing';\r\n                color = 'FF8F00'\r\n                break;\r\n            case 1:\r\n                stutas = 'Finish';\r\n                color = '15C323'\r\n                break;\r\n            case 2:\r\n                stutas = 'In Review';\r\n                color = 'FF8F00'\r\n                break;\r\n            case -1:\r\n                stutas = 'Refuse';\r\n                color = 'D32424'\r\n                break;\r\n            case -2:\r\n                stutas = 'GetFail';\r\n                color = 'D32424'\r\n                break;\r\n        }\r\n        this.mCoin.node.parent.parent.active = false;\r\n        this.mStatus.node.active = true;\r\n        this.mStatus.string = stutas;\r\n        this.mStatus.node.color = new cc.Color().fromHEX(color);\r\n    }\r\n}\r\n"]}